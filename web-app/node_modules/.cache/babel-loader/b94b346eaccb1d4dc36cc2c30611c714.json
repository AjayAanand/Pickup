{"ast":null,"code":"import _slicedToArray from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import MaterialTable from'material-table';import{useSelector,useDispatch}from\"react-redux\";import CircularLoading from\"../components/CircularLoading\";import{api}from'common';import{useTranslation}from\"react-i18next\";import{colors}from'../components/Theme/WebTheme';import{jsx as _jsx}from\"react/jsx-runtime\";export default function CancellationReasons(){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var isRTL=i18n.dir();var editCancellationReason=api.editCancellationReason;var columns=[{title:t('reason'),field:'label',render:function render(rowData){return/*#__PURE__*/_jsx(\"span\",{children:rowData.label});},cellStyle:{textAlign:isRTL==='rtl'?'right':'left'},headerStyle:{textAlign:isRTL==='rtl'?'right':'left'}}];var settings=useSelector(function(state){return state.settingsdata.settings;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var cancelreasondata=useSelector(function(state){return state.cancelreasondata;});var dispatch=useDispatch();useEffect(function(){if(cancelreasondata.complex){setData(cancelreasondata.complex);}else{setData([]);}},[cancelreasondata.complex]);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedRow=_useState4[0],setSelectedRow=_useState4[1];return cancelreasondata.loading?/*#__PURE__*/_jsx(CircularLoading,{}):/*#__PURE__*/_jsx(MaterialTable,{title:t('cancellation_reasons'),columns:columns,style:{direction:isRTL==='rtl'?'rtl':'ltr',borderRadius:\"8px\",boxShadow:\"4px 4px 6px #9E9E9E\"},data:data,onRowClick:function onRowClick(evt,selectedRow){return setSelectedRow(selectedRow.tableData.id);},options:{exportButton:true,pageSize:10,rowStyle:function rowStyle(rowData){return{backgroundColor:selectedRow===rowData.tableData.id?'#EEE':'#FFF'};},editable:{backgroundColor:colors.Header_Text,fontSize:\"0.8em\",fontWeight:'bold ',fontFamily:'Lucida Console\", \"Courier New\", monospace'},headerStyle:{position:\"sticky\",top:\"0px\",backgroundColor:colors.Header_Text_back,color:'#fff',fontSize:\"0.8em\",fontWeight:'bold ',fontFamily:'Lucida Console\", \"Courier New\", monospace'}},localization:{body:{addTooltip:t('add'),deleteTooltip:t('delete'),editTooltip:t('edit'),emptyDataSourceMessage:t('blank_message'),editRow:{deleteText:t('delete_message'),cancelTooltip:t('cancel'),saveTooltip:t('save')}},toolbar:{searchPlaceholder:t('search'),exportTitle:t('export')},pagination:{labelDisplayedRows:'{from}-{to} '+t('of')+' {count}',firstTooltip:t('first_page_tooltip'),previousTooltip:t('previous_page_tooltip'),nextTooltip:t('next_page_tooltip'),lastTooltip:t('last_page_tooltip')}},editable:settings.AllowCriticalEditsAdmin?{onRowAdd:function onRowAdd(newData){return new Promise(function(resolve,reject){setTimeout(function(){var tblData=data;newData.value=tblData.length;if(!(newData&&newData.label)){alert(t('no_details_error'));reject();}else{tblData.push(newData);dispatch(editCancellationReason(tblData,\"Add\"));resolve();}},600);});},onRowUpdate:function onRowUpdate(newData,oldData){return new Promise(function(resolve,reject){setTimeout(function(){if(!(newData&&newData.label)){alert(t('no_details_error'));reject();}else{resolve();if(newData!==oldData){var tblData=data;tblData[tblData.indexOf(oldData)]=newData;dispatch(editCancellationReason(tblData,\"Update\"));}}},600);});},onRowDelete:function onRowDelete(oldData){return new Promise(function(resolve){setTimeout(function(){resolve();var tblData=data;var newTtblData=tblData.filter(function(item){return item.value!==oldData.value;});dispatch(editCancellationReason(newTtblData,\"Delete\"));},600);});}}:null});}","map":{"version":3,"names":["React","useState","useEffect","MaterialTable","useSelector","useDispatch","CircularLoading","api","useTranslation","colors","jsx","_jsx","CancellationReasons","_useTranslation","t","i18n","isRTL","dir","editCancellationReason","columns","title","field","render","rowData","children","label","cellStyle","textAlign","headerStyle","settings","state","settingsdata","_useState","_useState2","_slicedToArray","data","setData","cancelreasondata","dispatch","complex","_useState3","_useState4","selectedRow","setSelectedRow","loading","style","direction","borderRadius","boxShadow","onRowClick","evt","tableData","id","options","exportButton","pageSize","rowStyle","backgroundColor","editable","Header_Text","fontSize","fontWeight","fontFamily","position","top","Header_Text_back","color","localization","body","addTooltip","deleteTooltip","editTooltip","emptyDataSourceMessage","editRow","deleteText","cancelTooltip","saveTooltip","toolbar","searchPlaceholder","exportTitle","pagination","labelDisplayedRows","firstTooltip","previousTooltip","nextTooltip","lastTooltip","AllowCriticalEditsAdmin","onRowAdd","newData","Promise","resolve","reject","setTimeout","tblData","value","length","alert","push","onRowUpdate","oldData","indexOf","onRowDelete","newTtblData","filter","item"],"sources":["/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/web-app/src/views/CancellationReasons.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport CircularLoading from \"../components/CircularLoading\";\r\nimport { api } from 'common';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {colors} from '../components/Theme/WebTheme';\r\n\r\nexport default function CancellationReasons() {\r\n  const { t,i18n } = useTranslation();\r\n  const isRTL = i18n.dir();\r\n  const {\r\n    editCancellationReason\r\n  } = api;\r\n\r\n  const columns = [\r\n    { title: t('reason'), field: 'label',render: rowData => <span>{rowData.label}</span>,cellStyle:{textAlign:isRTL=== 'rtl' ?'right':'left'},headerStyle:{textAlign:isRTL=== 'rtl' ?'right':'left'}}\r\n  ];\r\n  const settings = useSelector(state => state.settingsdata.settings);\r\n  const [data, setData] = useState([]);\r\n  const cancelreasondata = useSelector(state => state.cancelreasondata);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (cancelreasondata.complex) {\r\n      setData(cancelreasondata.complex);\r\n    }else{\r\n      setData([]);\r\n    }\r\n  }, [cancelreasondata.complex]);\r\n\r\n  const [selectedRow, setSelectedRow] = useState(null);\r\n\r\n  return (\r\n    cancelreasondata.loading ? <CircularLoading /> :\r\n      <MaterialTable\r\n        title={t('cancellation_reasons')}\r\n        columns={columns}\r\n        style={{direction:isRTL ==='rtl'?'rtl':'ltr', borderRadius: \"8px\", boxShadow: \"4px 4px 6px #9E9E9E\"}}\r\n        data={data}\r\n        onRowClick={((evt, selectedRow) => setSelectedRow(selectedRow.tableData.id))}\r\n        options={{\r\n          exportButton: true,\r\n          pageSize: 10,\r\n          rowStyle: rowData => ({\r\n            backgroundColor: (selectedRow === rowData.tableData.id) ? '#EEE' : '#FFF'\r\n          }),\r\n          editable:{\r\n            backgroundColor: colors.Header_Text,\r\n            fontSize: \"0.8em\",\r\n            fontWeight: 'bold ',\r\n            fontFamily: 'Lucida Console\", \"Courier New\", monospace'\r\n          },\r\n          headerStyle: {\r\n            position: \"sticky\",\r\n            top: \"0px\",\r\n            backgroundColor: colors.Header_Text_back ,\r\n            color: '#fff',\r\n            fontSize: \"0.8em\",\r\n            fontWeight: 'bold ',\r\n            fontFamily: 'Lucida Console\", \"Courier New\", monospace'\r\n          },\r\n        }}\r\n        localization={{body:{\r\n          addTooltip: (t('add')),\r\n          deleteTooltip: (t('delete')),\r\n          editTooltip: (t('edit')),\r\n          emptyDataSourceMessage: (\r\n            (t('blank_message'))\r\n        ),\r\n        editRow: { \r\n          deleteText: (t('delete_message')),\r\n          cancelTooltip: (t('cancel')),\r\n          saveTooltip: (t('save')) \r\n            }, \r\n          },\r\n          toolbar: {\r\n            searchPlaceholder: (t('search')),\r\n            exportTitle: (t('export')),\r\n          },\r\n          pagination: {\r\n            labelDisplayedRows: ('{from}-{to} '+ (t('of'))+ ' {count}'),\r\n            firstTooltip: (t('first_page_tooltip')),\r\n            previousTooltip: (t('previous_page_tooltip')),\r\n            nextTooltip: (t('next_page_tooltip')),\r\n            lastTooltip: (t('last_page_tooltip'))\r\n          },\r\n        }}\r\n        editable={settings.AllowCriticalEditsAdmin ? {\r\n            onRowAdd: newData =>\r\n            new Promise((resolve, reject)=> {\r\n              setTimeout(() => {\r\n                const tblData = data;\r\n                newData.value = tblData.length;\r\n                if(!(newData && newData.label)){\r\n                  alert(t('no_details_error'));\r\n                  reject();\r\n                }else{\r\n                  tblData.push(newData);\r\n                  dispatch(editCancellationReason(tblData, \"Add\"));\r\n                  resolve();\r\n                }\r\n              }, 600);\r\n            }),\r\n          onRowUpdate: (newData, oldData) =>\r\n            new Promise((resolve, reject)=> {\r\n              setTimeout(() => {\r\n                if(!(newData && newData.label )){\r\n                  alert(t('no_details_error'));\r\n                  reject();\r\n                }else {\r\n                  resolve();\r\n                  if(newData !== oldData){\r\n                    const tblData = data;\r\n                    tblData[tblData.indexOf(oldData)] = newData;\r\n                    dispatch(editCancellationReason(tblData, \"Update\"));\r\n                  }\r\n                }\r\n              }, 600);\r\n            }),\r\n          onRowDelete: oldData =>\r\n            new Promise(resolve => {\r\n              setTimeout(() => {\r\n                resolve();\r\n                const tblData = data;\r\n                const newTtblData = tblData.filter((item) => item.value !== oldData.value);\r\n                dispatch(editCancellationReason(newTtblData, \"Delete\"));\r\n              }, 600);\r\n            }),\r\n        } : null}\r\n      />\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}