{"ast":null,"code":"import{FETCH_PROMOS,FETCH_PROMOS_SUCCESS,FETCH_PROMOS_FAILED,EDIT_PROMOS}from\"../store/types\";import{firebase}from'../config/configureFirebase';import{onValue,push,set,remove}from\"firebase/database\";export var fetchPromos=function fetchPromos(){return function(dispatch){var promoRef=firebase.promoRef;dispatch({type:FETCH_PROMOS,payload:null});onValue(promoRef,function(snapshot){if(snapshot.val()){var data=snapshot.val();var arr=Object.keys(data).map(function(i){data[i].id=i;return data[i];});dispatch({type:FETCH_PROMOS_SUCCESS,payload:arr});}else{dispatch({type:FETCH_PROMOS_FAILED,payload:\"No promos available.\"});}});};};export var editPromo=function editPromo(promo,method){return function(dispatch){var promoRef=firebase.promoRef,promoEditRef=firebase.promoEditRef;dispatch({type:EDIT_PROMOS,payload:{method:method,promo:promo}});if(method==='Add'){push(promoRef,promo);}else if(method==='Delete'){remove(promoEditRef(promo.id));}else{set(promoEditRef(promo.id),promo);}};};","map":{"version":3,"names":["FETCH_PROMOS","FETCH_PROMOS_SUCCESS","FETCH_PROMOS_FAILED","EDIT_PROMOS","firebase","onValue","push","set","remove","fetchPromos","dispatch","promoRef","type","payload","snapshot","val","data","arr","Object","keys","map","i","id","editPromo","promo","method","promoEditRef"],"sources":["/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/common/src/actions/promoactions.js"],"sourcesContent":["import {\r\n  FETCH_PROMOS,\r\n  FETCH_PROMOS_SUCCESS,\r\n  FETCH_PROMOS_FAILED,\r\n  EDIT_PROMOS\r\n} from \"../store/types\";\r\nimport { firebase } from '../config/configureFirebase';\r\nimport { onValue, push, set, remove } from \"firebase/database\";\r\n\r\nexport const fetchPromos = () => (dispatch) => {\r\n\r\n  const {\r\n    promoRef\r\n  } = firebase;\r\n\r\n  dispatch({\r\n    type: FETCH_PROMOS,\r\n    payload: null\r\n  });\r\n  onValue(promoRef, snapshot => {\r\n    if (snapshot.val()) {\r\n      const data = snapshot.val();\r\n      const arr = Object.keys(data).map(i => {\r\n        data[i].id = i;\r\n        return data[i]\r\n      });\r\n      dispatch({\r\n        type: FETCH_PROMOS_SUCCESS,\r\n        payload: arr\r\n      });\r\n    } else {\r\n      dispatch({\r\n        type: FETCH_PROMOS_FAILED,\r\n        payload: \"No promos available.\"\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport const editPromo = (promo, method) => (dispatch) => {\r\n  const {\r\n    promoRef, \r\n    promoEditRef\r\n  } = firebase;\r\n  dispatch({\r\n    type: EDIT_PROMOS,\r\n    payload: { method, promo }\r\n  });\r\n  if (method === 'Add') {\r\n    push(promoRef, promo);\r\n  } else if (method === 'Delete') {\r\n    remove(promoEditRef(promo.id));\r\n  } else {\r\n    set(promoEditRef(promo.id),promo);\r\n  }\r\n}"],"mappings":"AAAA,OACEA,YAAY,CACZC,oBAAoB,CACpBC,mBAAmB,CACnBC,WAAW,KACN,gBAAgB,CACvB,OAASC,QAAQ,KAAQ,6BAA6B,CACtD,OAASC,OAAO,CAAEC,IAAI,CAAEC,GAAG,CAAEC,MAAM,KAAQ,mBAAmB,CAE9D,MAAO,IAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,QAAS,UAACC,QAAQ,CAAK,CAE7C,GACE,CAAAC,QAAQ,CACNP,QAAQ,CADVO,QAAQ,CAGVD,QAAQ,CAAC,CACPE,IAAI,CAAEZ,YAAY,CAClBa,OAAO,CAAE,IACX,CAAC,CAAC,CACFR,OAAO,CAACM,QAAQ,CAAE,SAAAG,QAAQ,CAAI,CAC5B,GAAIA,QAAQ,CAACC,GAAG,EAAE,CAAE,CAClB,GAAM,CAAAC,IAAI,CAAGF,QAAQ,CAACC,GAAG,EAAE,CAC3B,GAAM,CAAAE,GAAG,CAAGC,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAACI,GAAG,CAAC,SAAAC,CAAC,CAAI,CACrCL,IAAI,CAACK,CAAC,CAAC,CAACC,EAAE,CAAGD,CAAC,CACd,MAAO,CAAAL,IAAI,CAACK,CAAC,CAAC,CAChB,CAAC,CAAC,CACFX,QAAQ,CAAC,CACPE,IAAI,CAAEX,oBAAoB,CAC1BY,OAAO,CAAEI,GACX,CAAC,CAAC,CACJ,CAAC,IAAM,CACLP,QAAQ,CAAC,CACPE,IAAI,CAAEV,mBAAmB,CACzBW,OAAO,CAAE,sBACX,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACJ,CAAC,GAED,MAAO,IAAM,CAAAU,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIC,KAAK,CAAEC,MAAM,QAAK,UAACf,QAAQ,CAAK,CACxD,GACE,CAAAC,QAAQ,CAENP,QAAQ,CAFVO,QAAQ,CACRe,YAAY,CACVtB,QAAQ,CADVsB,YAAY,CAEdhB,QAAQ,CAAC,CACPE,IAAI,CAAET,WAAW,CACjBU,OAAO,CAAE,CAAEY,MAAM,CAANA,MAAM,CAAED,KAAK,CAALA,KAAM,CAC3B,CAAC,CAAC,CACF,GAAIC,MAAM,GAAK,KAAK,CAAE,CACpBnB,IAAI,CAACK,QAAQ,CAAEa,KAAK,CAAC,CACvB,CAAC,IAAM,IAAIC,MAAM,GAAK,QAAQ,CAAE,CAC9BjB,MAAM,CAACkB,YAAY,CAACF,KAAK,CAACF,EAAE,CAAC,CAAC,CAChC,CAAC,IAAM,CACLf,GAAG,CAACmB,YAAY,CAACF,KAAK,CAACF,EAAE,CAAC,CAACE,KAAK,CAAC,CACnC,CACF,CAAC"},"metadata":{},"sourceType":"module"}