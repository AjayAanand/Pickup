{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{Select,MenuItem,Grid,Typography,TextField,FormControlLabel,FormControl,FormLabel,Radio,RadioGroup,Modal}from'@mui/material';import GoogleMapsAutoComplete from'../components/GoogleMapsAutoComplete';import{useSelector,useDispatch}from\"react-redux\";import AlertDialog from'../components/AlertDialog';import{makeStyles}from'@mui/styles';import UsersCombo from'../components/UsersCombo';import{api}from'common';import Button from\"components/CustomButtons/Button.js\";import{useTranslation}from\"react-i18next\";import{colors}from'../components/Theme/WebTheme';import{BookingModalBody,validateBookingObj}from'common/sharedFunctions';import{useLocation,useNavigate}from'react-router-dom';import{calcEst,showEst,optionsRequired}from'../common/sharedFunctions';import DialogActions from'@mui/material/DialogActions';import CircularProgress from'@mui/material/CircularProgress';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{'& > *':{margin:theme.spacing(1)}},'@global':{body:{backgroundColor:theme.palette.common.white}},modal:{display:'flex',padding:theme.spacing(1),alignItems:'center',justifyContent:'center'},paper:{width:480,backgroundColor:theme.palette.background.paper,border:'2px solid #000',boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)},container:{marginTop:theme.spacing(1),backgroundColor:colors.Header,alignContent:'center',borderRadius:\"8px\",width:'70%'},container1:{backgroundColor:colors.LandingPage_Background,borderTopLeftRadius:\"0px\",borderTopRightRadius:\"0px\",borderBottomLeftRadius:\"8px\",borderBottomRightRadius:\"8px\",padding:'30px',width:'100%',top:\"19px\",boxShadow:\"4px 4px 6px #9E9E9E\"},title:{color:colors.LandingPage_Background,padding:'10px'},gridcontainer:{alignContent:'center'},items:{margin:0,width:'100%'},input:{fontSize:18,color:\"#000\"},inputdimmed:{fontSize:18,color:\"#737373\"},carphoto:{height:'18px',marginRight:'10px'},carphotoRtl:{height:'16px',marginLeft:'10px'},buttonStyle:{margin:0,width:'100%',height:40,borderRadius:\"30px\",backgroundColor:colors.Header,color:'#FFF'},inputRtl:{\"& label\":{right:25,left:\"auto\"},\"& legend\":{textAlign:\"right\",marginRight:18}},rightRty:{\"& legend\":{marginRight:30}}};});var icons={'paypal':require('../assets/payment-icons/paypal-logo.png').default,'braintree':require('../assets/payment-icons/braintree-logo.png').default,'stripe':require('../assets/payment-icons/stripe-logo.png').default,'paytm':require('../assets/payment-icons/paytm-logo.png').default,'payulatam':require('../assets/payment-icons/payulatam-logo.png').default,'flutterwave':require('../assets/payment-icons/flutterwave-logo.png').default,'paystack':require('../assets/payment-icons/paystack-logo.png').default,'securepay':require('../assets/payment-icons/securepay-logo.png').default,'payfast':require('../assets/payment-icons/payfast-logo.png').default,'liqpay':require('../assets/payment-icons/liqpay-logo.png').default,'culqi':require('../assets/payment-icons/culqi-logo.png').default,'mercadopago':require('../assets/payment-icons/mercadopago-logo.png').default,'squareup':require('../assets/payment-icons/squareup-logo.png').default,'wipay':require('../assets/payment-icons/wipay-logo.png').default,'test':require('../assets/payment-icons/test-logo.png').default,'razorpay':require('../assets/payment-icons/razorpay-logo.png').default};export default function AddBookings(props){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var isRTL=i18n.dir();var getEstimate=api.getEstimate,clearEstimate=api.clearEstimate,addBooking=api.addBooking,clearBooking=api.clearBooking,MinutesPassed=api.MinutesPassed,GetDateString=api.GetDateString,GetDistance=api.GetDistance,updateBooking=api.updateBooking,updateProfileWithEmail=api.updateProfileWithEmail,checkUserExists=api.checkUserExists;var dispatch=useDispatch();var classes=useStyles();var cartypes=useSelector(function(state){return state.cartypes.cars;});var estimatedata=useSelector(function(state){return state.estimatedata;});var bookingdata=useSelector(function(state){return state.bookingdata;});var userdata=useSelector(function(state){return state.usersdata;});var auth=useSelector(function(state){return state.auth;});var settings=useSelector(function(state){return state.settingsdata.settings;});var providers=useSelector(function(state){return state.paymentmethods.providers;});var activeBookings=useSelector(function(state){return state.bookinglistdata.active;});var _useState=useState(t('select_car')),_useState2=_slicedToArray(_useState,2),carType=_useState2[0],setCarType=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),pickupAddress=_useState4[0],setPickupAddress=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),dropAddress=_useState6[0],setDropAddress=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),optionModalStatus=_useState8[0],setOptionModalStatus=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),estimateModalStatus=_useState10[0],setEstimateModalStatus=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selectedCarDetails=_useState12[0],setSelectedCarDetails=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),users=_useState14[0],setUsers=_useState14[1];var _useState15=useState({open:false,msg:''}),_useState16=_slicedToArray(_useState15,2),commonAlert=_useState16[0],setCommonAlert=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),userCombo=_useState18[0],setUserCombo=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),estimateRequested=_useState20[0],setEstimateRequested=_useState20[1];var _useState21=useState('Book Now'),_useState22=_slicedToArray(_useState21,2),bookingType=_useState22[0],setBookingType=_useState22[1];var rootRef=useRef(null);var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),tempRoute=_useState24[0],setTempRoute=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),drivers=_useState26[0],setDrivers=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),paymentModalStatus=_useState28[0],setPaymentModalStatus=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),walletModalStatus=_useState30[0],setWalletModalStatus=_useState30[1];var _useLocation=useLocation(),state=_useLocation.state;var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),selectedProvider=_useState32[0],setSelectedProvider=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),selectedProviderIndex=_useState34[0],setSelectedProviderIndex=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),roundTrip=_useState36[0],setRoundTrip=_useState36[1];var _useState37=useState(''),_useState38=_slicedToArray(_useState37,2),tripInstructions=_useState38[0],setTripInstructions=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),loading=_useState40[0],setLoading=_useState40[1];var _useState41=useState(),_useState42=_slicedToArray(_useState41,2),bookingOnWait=_useState42[0],setBookingOnWait=_useState42[1];var _useState43=useState({deliveryPerson:\"\",deliveryPersonPhone:\"\",pickUpInstructions:\"\",deliveryInstructions:\"\",parcelTypeIndex:0,optionIndex:0,parcelTypeSelected:null,optionSelected:null}),_useState44=_slicedToArray(_useState43,2),instructionData=_useState44[0],setInstructionData=_useState44[1];var _useState45=useState({firstName:'',lastName:'',email:''}),_useState46=_slicedToArray(_useState45,2),profileData=_useState46[0],setProfileData=_useState46[1];var _useState47=useState(0),_useState48=_slicedToArray(_useState47,2),payment_mode=_useState48[0],setPaymentMode=_useState48[1];var _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),radioProps=_useState50[0],setRadioProps=_useState50[1];var navigate=useNavigate();useEffect(function(){if(settings&&providers){setSelectedProvider(providers[0]);var arr=[{label:t('wallet'),value:0,cat:'wallet'}];var val=0;if(!settings.disable_online&&providers&&providers.length>0){val++;arr.push({label:t('card'),value:val,cat:'card'});}if(!settings.disable_cash){val++;arr.push({label:t('cash'),value:val,cat:'cash'});}setRadioProps(arr);}},[settings,providers,t]);;useEffect(function(){if(state&&state!==null){var carDetails=state.carData;setCarType(carDetails.name);var instObj=_objectSpread({},instructionData);if(Array.isArray(carDetails.parcelTypes)){instObj.parcelTypeSelected=carDetails.parcelTypes[0];instObj.parcelTypeIndex=0;}if(Array.isArray(carDetails.options)){instObj.optionSelected=carDetails.options[0];instObj.optionIndex=0;}setInstructionData(instObj);setSelectedCarDetails(carDetails);}},[instructionData,state]);var handleChange=function handleChange(e){if(e.target.name==='parcelTypeIndex'){setInstructionData(_objectSpread(_objectSpread({},instructionData),{},{parcelTypeIndex:parseInt(e.target.value),parcelTypeSelected:selectedCarDetails.parcelTypes[e.target.value]}));}else if(e.target.name==='optionIndex'){setInstructionData(_objectSpread(_objectSpread({},instructionData),{},{optionIndex:parseInt(e.target.value),optionSelected:selectedCarDetails.options[e.target.value]}));}else if(e.target.name==='payment_mode'){setPaymentMode(e.target.value);}else if(e.target.name==='selectedProviderIndex'){setSelectedProviderIndex(parseInt(e.target.value));setSelectedProvider(providers[parseInt(e.target.value)]);}else if(e.target.name==='tripInstructions'){setTripInstructions(e.target.value);}else if(e.target.name==='roundTrip'){setRoundTrip(e.target.value);}else if(e.target.name==='firstName'){setProfileData(_objectSpread(_objectSpread({},profileData),{},_defineProperty({},e.target.name,e.target.value)));}else if(e.target.name==='lastName'){setProfileData(_objectSpread(_objectSpread({},profileData),{},_defineProperty({},e.target.name,e.target.value)));}else if(e.target.name==='email'){setProfileData(_objectSpread(_objectSpread({},profileData),{},_defineProperty({},e.target.name,e.target.value)));}else{setInstructionData(_objectSpread(_objectSpread({},instructionData),{},_defineProperty({},e.target.name,e.target.value)));}};var _useState51=useState(GetDateString()),_useState52=_slicedToArray(_useState51,2),selectedDate=_useState52[0],setSelectedDate=_useState52[1];var clearForm=function clearForm(){setUserCombo(null);setPickupAddress(null);setDropAddress(null);setSelectedCarDetails(null);setCarType(t('select_car'));setBookingType('Book Now');setEstimateRequested(false);};useEffect(function(){if(auth.profile&&bookingOnWait){setEstimateModalStatus(false);dispatch(addBooking(bookingOnWait));setBookingOnWait(null);setLoading(false);}},[auth.profile,bookingOnWait,dispatch,addBooking]);useEffect(function(){if(bookingdata.booking&&bookingdata.booking.mainData.status==='PAYMENT_PENDING'){if(bookingdata.booking.mainData.payment_mode==='cash'){dispatch(clearBooking());setTempRoute(null);navigate('/bookings');}else{if(bookingdata.booking.mainData.payment_mode==='card'){setPaymentModalStatus(true);}else{setWalletModalStatus(true);}}}if(bookingdata.booking&&bookingdata.booking.mainData.status==='NEW'){dispatch(clearBooking());setTempRoute(null);navigate('/bookings');}},[bookingdata.booking,clearBooking,dispatch,navigate]);var handleCarSelect=function handleCarSelect(event){setCarType(event.target.value);var carDetails=null;for(var i=0;i<cartypes.length;i++){if(cartypes[i].name===event.target.value){carDetails=cartypes[i];var instObj=_objectSpread({},instructionData);if(Array.isArray(cartypes[i].parcelTypes)){instObj.parcelTypeSelected=cartypes[i].parcelTypes[0];instObj.parcelTypeIndex=0;}if(Array.isArray(cartypes[i].options)){instObj.optionSelected=cartypes[i].options[0];instObj.optionIndex=0;}setInstructionData(instObj);}}setSelectedCarDetails(carDetails);};var handleBookTypeSelect=function handleBookTypeSelect(event){setBookingType(event.target.value);if(bookingType==='Book Later'){setSelectedDate(GetDateString());}};var onDateChange=function onDateChange(event){setSelectedDate(event.target.value);};useEffect(function(){if(estimatedata.estimate&&estimateRequested){setEstimateRequested(false);setEstimateModalStatus(true);}if(userdata.users){var arr=[];for(var i=0;i<userdata.users.length;i++){var user=userdata.users[i];if(user.usertype==='customer'&&(auth.profile.usertype==='fleetadmin'&&user.fleetadmin===auth.profile.uid||auth.profile.usertype==='admin')){arr.push({'firstName':user.firstName,'lastName':user.lastName,'mobile':user.mobile,'email':user.email,'uid':user.id,'desc':user.firstName+' '+user.lastName+' ('+(settings.AllowCriticalEditsAdmin?user.mobile:\"Hidden\")+') '+(settings.AllowCriticalEditsAdmin?user.email:\"Hidden\"),'pushToken':user.pushToken?user.pushToken:''});}}setUsers(arr);var arrDrivers=[];for(var _i=0;_i<userdata.users.length;_i++){var _user=userdata.users[_i];if(_user.usertype&&_user.usertype==='driver'&&_user.approved===true&&_user.queue===false&&_user.driverActiveStatus===true&&_user.location){if(auth.profile.usertype==='fleetadmin'&&_user.fleetadmin===auth.profile.uid||auth.profile.usertype==='admin'||auth.profile.usertype==='customer'){arrDrivers.push({'uid':_user.id,'location':_user.location,'carType':_user.carType,'fleetadmin':_user.fleetadmin?_user.fleetadmin:null});}}}setDrivers(arrDrivers);}},[estimatedata.estimate,userdata.users,estimateRequested,settings.AllowCriticalEditsAdmin,auth.profile.usertype,auth.profile.uid]);useEffect(function(){if(auth.profile.usertype&&auth.profile.usertype==='customer'){setUserCombo({'firstName':auth.profile.firstName,'lastName':auth.profile.lastName,'mobile':auth.profile.mobile,'email':auth.profile.email,'uid':auth.profile.uid,'pushToken':auth.profile.pushToken?auth.profile.pushToken:''});}},[auth.profile]);var mobile=userCombo&&userCombo.mobile?true:false;var handleGetOptions=function handleGetOptions(e){e.preventDefault();if(settings&&settings.imageIdApproval&&auth.profile.usertype==='customer'&&auth.profile.verifyId||auth.profile.usertype==='admin'||settings&&!settings.imageIdApproval&&auth.profile.usertype==='customer'||auth.profile.usertype==='fleetadmin'){if(!(settings&&settings.disable_cash&&(auth.profile.usertype==='admin'||auth.profile.usertype==='fleetadmin'))||auth.profile.usertype==='customer'){if(auth.profile.usertype==='customer'&&parseFloat(auth.profile.walletBalance)>=0||auth.profile.usertype==='admin'||auth.profile.usertype==='fleetadmin'){setEstimateRequested(true);if(userCombo&&pickupAddress&&dropAddress&&selectedCarDetails){var directionService=new window.google.maps.DirectionsService();directionService.route({origin:new window.google.maps.LatLng(pickupAddress.coords.lat,pickupAddress.coords.lng),destination:new window.google.maps.LatLng(dropAddress.coords.lat,dropAddress.coords.lng),travelMode:window.google.maps.TravelMode.DRIVING},function(result,status){if(status===window.google.maps.DirectionsStatus.OK){var route={distance_in_km:result.routes[0].legs[0].distance.value/1000,time_in_secs:result.routes[0].legs[0].duration.value,polylinePoints:result.routes[0].overview_polyline};setTempRoute(route);if(pickupAddress&&dropAddress){if(bookingType==='Book Now'){if(mobile===true){if(Array.isArray(selectedCarDetails.options)||Array.isArray(selectedCarDetails.parcelTypes)){setOptionModalStatus(true);}else{var estimateRequest={pickup:pickupAddress,drop:dropAddress,carDetails:selectedCarDetails,instructionData:instructionData,routeDetails:route};dispatch(getEstimate(estimateRequest));}}else{setCommonAlert({open:true,msg:t('incomplete_user')});}}else{if(bookingType==='Book Later'&&selectedDate){if(MinutesPassed(selectedDate)>=15){if(mobile===true){if(Array.isArray(selectedCarDetails.options)||Array.isArray(selectedCarDetails.parcelTypes)){setOptionModalStatus(true);}else{var _estimateRequest={pickup:pickupAddress,drop:dropAddress,carDetails:selectedCarDetails,instructionData:instructionData,routeDetails:route};dispatch(getEstimate(_estimateRequest));}}else{setCommonAlert({open:true,msg:t('incomplete_user')});}}else{setCommonAlert({open:true,msg:t('past_booking_error')});}}else{setCommonAlert({open:true,msg:t('select_proper')});}}}else{setCommonAlert({open:true,msg:t('place_to_coords_error')});}}});}else{setCommonAlert({open:true,msg:t('select_proper')});}}else{setCommonAlert({open:true,msg:t('wallet_balance_low')});}}else{setCommonAlert({open:true,msg:t('cash_booking_false')});}}else{setCommonAlert({open:true,msg:t('verifyid_error')});}};var handleWalletPayment=function handleWalletPayment(e){e.preventDefault();var curBooking=_objectSpread({},bookingdata.booking.mainData);if(parseFloat(curBooking.trip_cost)>parseFloat(auth.profile.walletBalance)&&radioProps[payment_mode].cat==='wallet'){setCommonAlert({open:true,msg:t('wallet_balance_low')});}else{var requestedDrivers={};if(settings.autoDispatch&&bookingType==='Book Now'){for(var i=0;i<drivers.length;i++){var driver=drivers[i];var distance=GetDistance(pickupAddress.coords.lat,pickupAddress.coords.lng,driver.location.lat,driver.location.lng);if(settings.convert_to_mile){distance=distance/1.609344;}if(distance<(settings&&settings.driverRadius?settings.driverRadius:10)&&selectedCarDetails.name===driver.carType){requestedDrivers[driver['uid']]=true;}}}curBooking.prepaid=true;curBooking.status='NEW';curBooking.payment_mode=\"wallet\";curBooking.customer_paid=parseFloat(curBooking.trip_cost).toFixed(settings.decimal);curBooking.discount=0;curBooking.usedWalletMoney=parseFloat(curBooking.trip_cost).toFixed(settings.decimal);curBooking.cardPaymentAmount=0;curBooking.cashPaymentAmount=0;curBooking.payableAmount=0;curBooking.requestedDrivers=requestedDrivers;dispatch(updateBooking(curBooking));setTimeout(function(){dispatch(clearEstimate());setPaymentModalStatus(false);setWalletModalStatus(false);clearForm();dispatch(clearBooking());setTempRoute(null);navigate('/bookings');},1500);}};var handleGetEstimate=function handleGetEstimate(e){e.preventDefault();setOptionModalStatus(false);var estimateRequest={pickup:pickupAddress,drop:dropAddress,carDetails:selectedCarDetails,instructionData:instructionData,routeDetails:tempRoute};dispatch(getEstimate(estimateRequest));};var confirmBooking=function confirmBooking(e){e.preventDefault();var requestedDrivers={};var driverEstimates={};var notfound=true;if(activeBookings){for(var i=0;i<activeBookings.length;i++){if(activeBookings[i].payment_mode==='wallet'&&activeBookings[i].status!=='PAID'){notfound=false;break;}}}if(radioProps[payment_mode].cat==='wallet'&&notfound&&auth.profile.usertype==='customer'||radioProps[payment_mode].cat!=='wallet'||auth.profile.usertype==='admin'||auth.profile.usertype==='fleetadmin'){if(radioProps[payment_mode].cat==='wallet'&&parseFloat(auth.profile.walletBalance)>=parseFloat(estimatedata.estimate.estimateFare)&&!calcEst&&auth.profile.usertype==='customer'||radioProps[payment_mode].cat!=='wallet'||radioProps[payment_mode].cat==='wallet'&&calcEst&&auth.profile.usertype==='customer'||auth.profile.usertype==='admin'||auth.profile.usertype==='fleetadmin'){if(settings.autoDispatch&&bookingType==='Book Now'){for(var _i2=0;_i2<drivers.length;_i2++){var driver=drivers[_i2];var distance=GetDistance(pickupAddress.coords.lat,pickupAddress.coords.lng,driver.location.lat,driver.location.lng);if(settings.convert_to_mile){distance=distance/1.609344;}if(distance<(settings&&settings.driverRadius?settings.driverRadius:10)&&(settings.carType_required&&selectedCarDetails.name===driver.carType||!settings.carType_required)&&(auth.profile.usertype==='fleetadmin'&&driver.fleetadmin===auth.profile.uid||auth.profile.usertype!=='fleetadmin')){requestedDrivers[driver['uid']]=true;driverEstimates[driver['uid']]={distance:distance,timein_text:(distance*2+1).toFixed(0)+' min'};}}if(Object.keys(requestedDrivers).length===0){setCommonAlert({open:true,msg:t('no_driver_found_alert_messege')});return;}}var bookingObject={pickup:pickupAddress,drop:dropAddress,carDetails:selectedCarDetails,userDetails:{uid:userCombo.uid,firstName:userCombo.firstName,lastName:userCombo.lastName,mobile:userCombo.mobile,pushToken:userCombo.pushToken,email:userCombo.email},estimate:estimatedata.estimate,instructionData:instructionData,tripInstructions:tripInstructions,roundTrip:roundTrip===0?false:true,tripdate:bookingType==='Book Later'?new Date(selectedDate).getTime():new Date().getTime(),bookLater:bookingType==='Book Later'?true:false,settings:settings,booking_type_admin:auth.profile.usertype==='admin'?true:false,fleetadmin:auth.profile.usertype==='fleetadmin'?auth.profile.uid:null,requestedDrivers:calcEst?requestedDrivers:optionsRequired&&radioProps[payment_mode].cat==='cash'?requestedDrivers:settings.prepaid&&radioProps[payment_mode].cat==='cash'?requestedDrivers:!settings.prepaid?requestedDrivers:null,driverEstimates:driverEstimates,payment_mode:auth.profile.usertype==='admin'||auth.profile.usertype==='fleetadmin'?'cash':radioProps[payment_mode].cat,booking_from_web:true};if(auth.profile.usertype==='customer'&&!(auth.profile.firstName&&auth.profile.lastName&&auth.profile.email&&auth.profile.firstName.length>0&&auth.profile.lastName.length>0&&auth.profile.email.length>0)){var regx1=/([0-9\\s-]{7,})(?:\\s*(?:#|x\\.?|ext\\.?|extension)\\s*(\\d+))?$/;if(optionsRequired&&/\\S/.test(instructionData.deliveryPerson)&&regx1.test(instructionData.deliveryPersonPhone)&&instructionData.deliveryPersonPhone&&instructionData.deliveryPersonPhone.length>6||!optionsRequired){if(profileData.firstName&&profileData.firstName.length>0&&profileData.lastName&&profileData.lastName.length>0||auth.profile.firstName&&auth.profile.firstName.length>0&&auth.profile.lastName&&auth.profile.lastName.length>0){var re=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;if(re.test(profileData.email)&&!auth.profile.email||auth.profile.email&&auth.profile.email.length>0){setLoading(true);checkUserExists({email:profileData.email}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var paymentPacket,result,bookingData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(res.users&&res.users.length>0){setLoading(false);alert(t('user_exists'));}else if(res.error){setLoading(false);alert(t('email_or_mobile_issue'));}else{setLoading(false);if(radioProps[payment_mode].cat==='card'){paymentPacket={payment_mode:'card',customer_paid:parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),cardPaymentAmount:parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),discount:0,usedWalletMoney:0,cashPaymentAmount:0,promo_applied:false,promo_details:null,payableAmount:parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal)};bookingObject['paymentPacket']=paymentPacket;}result=validateBookingObj(t,bookingObject,instructionData);if(result.error){setCommonAlert({open:true,msg:result.msg});}else{profileData['uid']=auth.profile.uid;bookingData=result.bookingObject;bookingData.userDetails.firstName=profileData.firstName;bookingData.userDetails.lastName=profileData.lastName;bookingData.userDetails.email=profileData.email;setBookingOnWait(bookingData);}setTimeout(function(){dispatch(updateProfileWithEmail(profileData));},200);}case 1:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}else{setCommonAlert({open:true,msg:t('proper_email')});}}else{setCommonAlert({open:true,msg:t('proper_input_name')});}}else{setCommonAlert({open:true,msg:t('deliveryDetailMissing')});}}else{if(radioProps[payment_mode].cat==='card'){var paymentPacket={payment_mode:'card',customer_paid:parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),cardPaymentAmount:parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),discount:0,usedWalletMoney:0,cashPaymentAmount:0,promo_applied:false,promo_details:null,payableAmount:parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal)};bookingObject['paymentPacket']=paymentPacket;}var result=validateBookingObj(t,bookingObject,instructionData);if(result.error){setCommonAlert({open:true,msg:result.msg});}else{setEstimateModalStatus(false);dispatch(addBooking(result.bookingObject));}}}else{setCommonAlert({open:true,msg:t('wallet_balance_low')});}}else{setCommonAlert({open:true,msg:t('wallet_booking_alert')});}};var handleOptionModalClose=function handleOptionModalClose(e){e.preventDefault();setOptionModalStatus(false);};var handleEstimateModalClose=function handleEstimateModalClose(e){e.preventDefault();setEstimateModalStatus(false);dispatch(clearEstimate());setEstimateRequested(false);};var handleEstimateErrorClose=function handleEstimateErrorClose(e){e.preventDefault();dispatch(clearEstimate());setEstimateRequested(false);};var handleBookingErrorClose=function handleBookingErrorClose(e){e.preventDefault();dispatch(clearBooking());setEstimateRequested(false);};var handleCommonAlertClose=function handleCommonAlertClose(e){e.preventDefault();setCommonAlert({open:false,msg:''});};var handleWalletModalClose=function handleWalletModalClose(e){setTimeout(function(){setWalletModalStatus(false);dispatch(clearBooking());dispatch(clearEstimate());},1500);};var handlePaymentModalClose=function handlePaymentModalClose(e){setTimeout(function(){setPaymentModalStatus(false);dispatch(clearBooking());dispatch(clearEstimate());},1500);};return/*#__PURE__*/_jsxs(\"div\",{className:classes.container,ref:rootRef,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:12,md:8,lg:8,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",className:classes.title,style:{textAlign:isRTL==='rtl'?'right':'left'},children:t('addbookinglable')})}),/*#__PURE__*/_jsx(\"div\",{className:classes.container1,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:users&&auth.profile.usertype&&auth.profile.usertype!=='customer'?/*#__PURE__*/_jsx(UsersCombo,{className:classes.items,placeholder:t('select_user'),users:users,value:userCombo,onChange:function onChange(event,newValue){setUserCombo(newValue);}}):null}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(GoogleMapsAutoComplete,{variant:\"outlined\",placeholder:t('pickup_location'),value:pickupAddress,className:classes.items,onChange:function onChange(value){setPickupAddress(value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(GoogleMapsAutoComplete,{placeholder:t('drop_location'),variant:\"outlined\",value:dropAddress,className:classes.items,onChange:function onChange(value){setDropAddress(value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:cartypes?/*#__PURE__*/_jsxs(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",value:carType,onChange:handleCarSelect,variant:\"outlined\",fullWidth:true,style:{textAlign:isRTL==='rtl'?'right':'left'},className:carType===t('select_car')?classes.inputdimmed:classes.input,children:[/*#__PURE__*/_jsx(MenuItem,{dense:true,value:t('select_car'),style:{direction:isRTL==='rtl'?'rtl':'ltr',width:'100%',justifyContent:'flex-start',paddingLeft:10},children:t('select_car')},t('select_car')),cartypes.sort(function(a,b){return a.pos-b.pos;}).map(function(car){return/*#__PURE__*/_jsxs(MenuItem,{dense:true,value:car.name,style:{direction:isRTL==='rtl'?'rtl':'ltr',width:'100%',justifyContent:'flex-start',paddingLeft:10},children:[/*#__PURE__*/_jsx(\"img\",{src:car.image,className:isRTL==='rtl'?classes.carphotoRtl:classes.carphoto,alt:\"car types\"}),car.name]},car.name);})]}):null}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(Select,{id:\"booking-type-native\",value:bookingType,onChange:handleBookTypeSelect,className:classes.input,style:{textAlign:isRTL==='rtl'?'right':'left'},variant:\"outlined\",fullWidth:true,inputProps:{'aria-label':'Without label'},children:[/*#__PURE__*/_jsx(MenuItem,{dense:true,value:\"Book Now\",style:{direction:isRTL==='rtl'?'rtl':'ltr',width:'100%',justifyContent:'flex-start',paddingLeft:10},children:t('book_now')},\"Book Now\"),/*#__PURE__*/_jsx(MenuItem,{dense:true,value:\"Book Later\",style:{direction:isRTL==='rtl'?'rtl':'ltr',width:'100%',justifyContent:'flex-start',paddingLeft:10},children:t('book_later')},\"Book Later\")]})}),bookingType==='Book Later'?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{id:\"datetime-local\",label:t('booking_date_time'),type:\"datetime-local\",variant:\"outlined\",fullWidth:true,className:isRTL==='rtl'?classes.inputRtl:classes.commonInputStyle,InputProps:{className:classes.input,style:{textAlignLast:isRTL==='rtl'?'end':'start'}},value:selectedDate,onChange:onDateChange})}):null,bookingType==='Book Later'?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(Button,{size:\"lg\",onClick:handleGetOptions,variant:\"contained\",color:\"secondaryButton\",className:classes.buttonStyle,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-car\",style:isRTL==='rtl'?{marginLeft:5}:{marginRight:5}}),t('book')]})}):/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Button,{size:\"lg\",onClick:handleGetOptions,variant:\"contained\",color:\"secondaryButton\",className:classes.buttonStyle,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-car\",style:isRTL==='rtl'?{marginLeft:5}:{marginRight:5}}),t('book')]})})]})})]}),/*#__PURE__*/_jsx(Modal,{disablePortal:true,disableEnforceFocus:true,disableAutoFocus:true,open:optionModalStatus,onClose:handleOptionModalClose,className:classes.modal,container:function container(){return rootRef.current;},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,className:classes.paper,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{textAlign:isRTL==='rtl'?'right':'left'},children:selectedCarDetails&&selectedCarDetails.parcelTypes?/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",children:t('parcel_types')}),/*#__PURE__*/_jsx(RadioGroup,{name:\"parcelTypeIndex\",value:instructionData.parcelTypeIndex,onChange:handleChange,children:selectedCarDetails.parcelTypes.map(function(element,index){return/*#__PURE__*/_jsx(FormControlLabel,{value:index,control:/*#__PURE__*/_jsx(Radio,{}),label:settings.swipe_symbol===false?settings.symbol+' '+element.amount+' - '+element.description:element.amount+' '+settings.symbol+' - '+element.description},element.description);})})]}):null}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{textAlign:isRTL==='rtl'?'right':'left'},children:selectedCarDetails&&selectedCarDetails.options?/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",children:t('options')}),/*#__PURE__*/_jsx(RadioGroup,{name:\"optionIndex\",value:instructionData.optionIndex,onChange:handleChange,children:selectedCarDetails.options.map(function(element,index){return/*#__PURE__*/_jsx(FormControlLabel,{value:index,control:/*#__PURE__*/_jsx(Radio,{}),label:settings.swipe_symbol===false?settings.symbol+' '+element.amount+' - '+element.description:element.amount+' '+settings.symbol+' - '+element.description},element.description);})})]}):null}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{textAlign:isRTL==='rtl'?'right':'left'},children:[/*#__PURE__*/_jsx(Button,{onClick:handleOptionModalClose,variant:\"contained\",color:\"primary\",children:t('cancel')}),/*#__PURE__*/_jsx(Button,{onClick:handleGetEstimate,variant:\"contained\",color:\"primary\",style:isRTL==='rtl'?{marginRight:10}:{marginLeft:10},children:t('get_estimate')})]})]})}),/*#__PURE__*/_jsx(Modal,{disablePortal:true,disableEnforceFocus:true,disableAutoFocus:true,open:estimateModalStatus,onClose:handleEstimateModalClose,className:classes.modal,container:function container(){return rootRef.current;},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,className:classes.paper,children:[/*#__PURE__*/_jsx(BookingModalBody,{classes:classes,instructionData:instructionData,handleChange:handleChange,tripInstructions:tripInstructions,roundTrip:roundTrip,auth:auth,profileData:profileData}),showEst?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{textAlign:isRTL==='rtl'?'right':'left'},children:settings.swipe_symbol===false?/*#__PURE__*/_jsxs(Typography,{color:'primary',style:{fontSize:30},children:[t('total'),\" - \",settings?settings.symbol:null,\" \",estimatedata.estimate?estimatedata.estimate.estimateFare:null]}):/*#__PURE__*/_jsxs(Typography,{color:'primary',style:{fontSize:30},children:[t('total'),\" - \",estimatedata.estimate?estimatedata.estimate.estimateFare:null,\" \",settings?settings.symbol:null]})}):null,auth.profile.usertype==='customer'?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{textAlign:isRTL==='rtl'?'right':'left'},children:/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",children:t('payment_mode')}),/*#__PURE__*/_jsx(RadioGroup,{name:\"payment_mode\",value:payment_mode,onChange:handleChange,children:radioProps.map(function(element,index){return/*#__PURE__*/_jsx(FormControlLabel,{value:index,control:/*#__PURE__*/_jsx(Radio,{}),label:element.label},element.cat);})})]})}):null,/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{textAlign:isRTL==='rtl'?'right':'left'},children:loading?/*#__PURE__*/_jsx(DialogActions,{style:{justifyContent:'center',alignContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})}):/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Button,{onClick:handleEstimateModalClose,variant:\"contained\",color:\"primary\",children:t('cancel')}),/*#__PURE__*/_jsx(Button,{onClick:confirmBooking,variant:\"contained\",color:\"primary\",style:isRTL==='rtl'?{marginRight:10}:{marginLeft:10},children:t('book_now')})]})})]})}),/*#__PURE__*/_jsx(Modal,{disablePortal:true,disableEnforceFocus:true,disableAutoFocus:true,open:walletModalStatus,onClose:handleWalletModalClose,className:classes.modal,container:function container(){return rootRef.current;},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,className:classes.paper,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(Typography,{style:{fontWeight:'bolder',marginBottom:10},children:t('payment')}),bookingdata&&bookingdata.booking?/*#__PURE__*/_jsx(Typography,{color:\"primary\",style:{fontSize:30},children:settings.swipe_symbol===false?settings.symbol+bookingdata.booking.mainData.trip_cost:bookingdata.booking.mainData.trip_cost+settings.symbol}):null,/*#__PURE__*/_jsx(Typography,{children:t('use_wallet_balance')+\" \"+(settings.swipe_symbol===false?settings.symbol+auth.profile.walletBalance:auth.profile.walletBalance+settings.symbol)+\")\"})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:12,md:12,lg:12,children:[/*#__PURE__*/_jsx(Button,{onClick:handleWalletModalClose,variant:\"contained\",color:\"primary\",children:t('cancel')}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",style:{marginLeft:10},onClick:handleWalletPayment,children:t('paynow_button')})]})]})}),/*#__PURE__*/_jsx(Modal,{disablePortal:true,disableEnforceFocus:true,disableAutoFocus:true,open:paymentModalStatus,onClose:handlePaymentModalClose,className:classes.modal,container:function container(){return rootRef.current;},children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,className:classes.paper,children:providers&&selectedProvider&&bookingdata&&bookingdata.booking?/*#__PURE__*/_jsxs(\"form\",{action:selectedProvider.link,method:\"POST\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"order_id\",value:bookingdata.booking.booking_id}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"amount\",value:bookingdata.booking.mainData.trip_cost}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"currency\",value:settings.code}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"product_name\",value:t('bookingPayment')}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"first_name\",value:auth.profile.firstName}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"last_name\",value:auth.profile.lastName}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"quantity\",value:1}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"cust_id\",value:bookingdata.booking.mainData.customer}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"mobile_no\",value:bookingdata.booking.mainData.customer_contact}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"email\",value:bookingdata.booking.mainData.customer_email}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:12,md:12,lg:12,style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",children:t('payment')}),/*#__PURE__*/_jsx(Select,{id:\"selectedProviderIndex\",name:\"selectedProviderIndex\",value:selectedProviderIndex,label:t('payment'),onChange:handleChange,style:{textAlign:isRTL==='rtl'?'right':'left'},inputProps:{'aria-label':'Without label'},children:providers.map(function(provider,index){return/*#__PURE__*/_jsxs(MenuItem,{value:index,children:[/*#__PURE__*/_jsx(\"img\",{style:{height:24,margin:7},src:icons[provider.name],alt:provider.name}),\" \"]},provider.name);})})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:12,md:12,lg:12,children:[/*#__PURE__*/_jsx(Button,{onClick:handlePaymentModalClose,variant:\"contained\",color:\"primary\",children:t('cancel')}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",style:{marginLeft:10},onClick:handlePaymentModalClose,children:t('paynow_button')})]})]}):null})}),/*#__PURE__*/_jsx(AlertDialog,{open:bookingdata.error.flag,onClose:handleBookingErrorClose,children:bookingdata.error.msg}),/*#__PURE__*/_jsx(AlertDialog,{open:estimatedata.error.flag,onClose:handleEstimateErrorClose,children:estimatedata.error.msg}),/*#__PURE__*/_jsx(AlertDialog,{open:commonAlert.open,onClose:handleCommonAlertClose,children:commonAlert.msg})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","Select","MenuItem","Grid","Typography","TextField","FormControlLabel","FormControl","FormLabel","Radio","RadioGroup","Modal","GoogleMapsAutoComplete","useSelector","useDispatch","AlertDialog","makeStyles","UsersCombo","api","Button","useTranslation","colors","BookingModalBody","validateBookingObj","useLocation","useNavigate","calcEst","showEst","optionsRequired","DialogActions","CircularProgress","jsx","_jsx","jsxs","_jsxs","useStyles","theme","root","margin","spacing","body","backgroundColor","palette","common","white","modal","display","padding","alignItems","justifyContent","paper","width","background","border","boxShadow","shadows","container","marginTop","Header","alignContent","borderRadius","container1","LandingPage_Background","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","top","title","color","gridcontainer","items","input","fontSize","inputdimmed","carphoto","height","marginRight","carphotoRtl","marginLeft","buttonStyle","inputRtl","right","left","textAlign","rightRty","icons","require","default","AddBookings","props","_useTranslation","t","i18n","isRTL","dir","getEstimate","clearEstimate","addBooking","clearBooking","MinutesPassed","GetDateString","GetDistance","updateBooking","updateProfileWithEmail","checkUserExists","dispatch","classes","cartypes","state","cars","estimatedata","bookingdata","userdata","usersdata","auth","settings","settingsdata","providers","paymentmethods","activeBookings","bookinglistdata","active","_useState","_useState2","_slicedToArray","carType","setCarType","_useState3","_useState4","pickupAddress","setPickupAddress","_useState5","_useState6","dropAddress","setDropAddress","_useState7","_useState8","optionModalStatus","setOptionModalStatus","_useState9","_useState10","estimateModalStatus","setEstimateModalStatus","_useState11","_useState12","selectedCarDetails","setSelectedCarDetails","_useState13","_useState14","users","setUsers","_useState15","open","msg","_useState16","commonAlert","setCommonAlert","_useState17","_useState18","userCombo","setUserCombo","_useState19","_useState20","estimateRequested","setEstimateRequested","_useState21","_useState22","bookingType","setBookingType","rootRef","_useState23","_useState24","tempRoute","setTempRoute","_useState25","_useState26","drivers","setDrivers","_useState27","_useState28","paymentModalStatus","setPaymentModalStatus","_useState29","_useState30","walletModalStatus","setWalletModalStatus","_useLocation","_useState31","_useState32","selectedProvider","setSelectedProvider","_useState33","_useState34","selectedProviderIndex","setSelectedProviderIndex","_useState35","_useState36","roundTrip","setRoundTrip","_useState37","_useState38","tripInstructions","setTripInstructions","_useState39","_useState40","loading","setLoading","_useState41","_useState42","bookingOnWait","setBookingOnWait","_useState43","deliveryPerson","deliveryPersonPhone","pickUpInstructions","deliveryInstructions","parcelTypeIndex","optionIndex","parcelTypeSelected","optionSelected","_useState44","instructionData","setInstructionData","_useState45","firstName","lastName","email","_useState46","profileData","setProfileData","_useState47","_useState48","payment_mode","setPaymentMode","_useState49","_useState50","radioProps","setRadioProps","navigate","arr","label","value","cat","val","disable_online","length","push","disable_cash","carDetails","carData","name","instObj","_objectSpread","Array","isArray","parcelTypes","options","handleChange","e","target","parseInt","_defineProperty","_useState51","_useState52","selectedDate","setSelectedDate","clearForm","profile","booking","mainData","status","handleCarSelect","event","i","handleBookTypeSelect","onDateChange","estimate","user","usertype","fleetadmin","uid","mobile","id","AllowCriticalEditsAdmin","pushToken","arrDrivers","approved","queue","driverActiveStatus","location","handleGetOptions","preventDefault","imageIdApproval","verifyId","parseFloat","walletBalance","directionService","window","google","maps","DirectionsService","route","origin","LatLng","coords","lat","lng","destination","travelMode","TravelMode","DRIVING","result","DirectionsStatus","OK","distance_in_km","routes","legs","distance","time_in_secs","duration","polylinePoints","overview_polyline","estimateRequest","pickup","drop","routeDetails","handleWalletPayment","curBooking","trip_cost","requestedDrivers","autoDispatch","driver","convert_to_mile","driverRadius","prepaid","customer_paid","toFixed","decimal","discount","usedWalletMoney","cardPaymentAmount","cashPaymentAmount","payableAmount","setTimeout","handleGetEstimate","confirmBooking","driverEstimates","notfound","estimateFare","carType_required","timein_text","Object","keys","bookingObject","userDetails","tripdate","Date","getTime","bookLater","booking_type_admin","booking_from_web","regx1","test","re","then","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","paymentPacket","bookingData","wrap","_callee$","_context","prev","next","alert","error","promo_applied","promo_details","stop","_x","apply","arguments","handleOptionModalClose","handleEstimateModalClose","handleEstimateErrorClose","handleBookingErrorClose","handleCommonAlertClose","handleWalletModalClose","handlePaymentModalClose","className","ref","children","item","xs","sm","md","lg","component","variant","style","placeholder","onChange","newValue","labelId","fullWidth","dense","direction","paddingLeft","sort","a","b","pos","map","car","src","image","alt","inputProps","type","commonInputStyle","InputProps","textAlignLast","size","onClick","disablePortal","disableEnforceFocus","disableAutoFocus","onClose","current","element","index","control","swipe_symbol","symbol","amount","description","marginBottom","fontWeight","action","link","method","booking_id","code","customer","customer_contact","customer_email","provider","flag"],"sources":["/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/web-app/src/views/AddBookings.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Select,\r\n  MenuItem,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n  FormControlLabel,\r\n  FormControl,\r\n  FormLabel,\r\n  Radio,\r\n  RadioGroup,\r\n  Modal\r\n} from '@mui/material';\r\nimport GoogleMapsAutoComplete from '../components/GoogleMapsAutoComplete';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport AlertDialog from '../components/AlertDialog';\r\nimport { makeStyles } from '@mui/styles';\r\nimport UsersCombo from '../components/UsersCombo';\r\nimport { api } from 'common';\r\nimport Button from \"components/CustomButtons/Button.js\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {colors} from '../components/Theme/WebTheme';\r\nimport { BookingModalBody, validateBookingObj } from 'common/sharedFunctions';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { calcEst, showEst, optionsRequired } from '../common/sharedFunctions';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  '@global': {\r\n    body: {\r\n      backgroundColor: theme.palette.common.white,\r\n    },\r\n  },\r\n  modal: {\r\n    display: 'flex',\r\n    padding: theme.spacing(1),\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  paper: {\r\n    width:480,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '2px solid #000',\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n  container: {\r\n    marginTop: theme.spacing(1),\r\n    backgroundColor: colors.Header,\r\n    alignContent: 'center',\r\n    borderRadius: \"8px\",\r\n    width: '70%',\r\n  },\r\n  container1: {\r\n    backgroundColor: colors.LandingPage_Background,\r\n    borderTopLeftRadius:\"0px\",\r\n    borderTopRightRadius:\"0px\",\r\n    borderBottomLeftRadius: \"8px\",\r\n    borderBottomRightRadius: \"8px\",\r\n    padding:'30px',\r\n    width: '100%',\r\n    top: \"19px\",\r\n    boxShadow: \"4px 4px 6px #9E9E9E\"\r\n  },\r\n  title: {\r\n    color: colors.LandingPage_Background,\r\n    padding: '10px'\r\n  },\r\n  gridcontainer: {\r\n    alignContent: 'center'\r\n  },\r\n  items: {\r\n    margin: 0,\r\n    width: '100%'\r\n  },\r\n  input: {\r\n    fontSize: 18,\r\n    color: \"#000\"\r\n  },\r\n  inputdimmed: {\r\n    fontSize: 18,\r\n    color: \"#737373\"\r\n  },\r\n  carphoto: {\r\n    height: '18px',\r\n    marginRight: '10px'\r\n  },\r\n  carphotoRtl:{\r\n    height: '16px',\r\n    marginLeft:'10px'\r\n  },\r\n  buttonStyle: {\r\n    margin: 0,\r\n    width: '100%',\r\n    height: 40,\r\n    borderRadius: \"30px\",\r\n    backgroundColor: colors.Header,\r\n    color:'#FFF'\r\n  },\r\n  inputRtl: {\r\n    \"& label\": {\r\n      right: 25,\r\n      left: \"auto\"\r\n    },\r\n    \"& legend\": {\r\n      textAlign: \"right\",\r\n      marginRight: 18\r\n    }\r\n  },\r\n  rightRty:{\r\n    \"& legend\": {\r\n      marginRight: 30\r\n    }\r\n  }\r\n}));\r\n\r\nconst icons = {\r\n  'paypal':require('../assets/payment-icons/paypal-logo.png').default,\r\n  'braintree':require('../assets/payment-icons/braintree-logo.png').default,\r\n  'stripe':require('../assets/payment-icons/stripe-logo.png').default,\r\n  'paytm':require('../assets/payment-icons/paytm-logo.png').default,\r\n  'payulatam':require('../assets/payment-icons/payulatam-logo.png').default,\r\n  'flutterwave':require('../assets/payment-icons/flutterwave-logo.png').default,\r\n  'paystack':require('../assets/payment-icons/paystack-logo.png').default,\r\n  'securepay':require('../assets/payment-icons/securepay-logo.png').default,\r\n  'payfast':require('../assets/payment-icons/payfast-logo.png').default,\r\n  'liqpay':require('../assets/payment-icons/liqpay-logo.png').default,\r\n  'culqi':require('../assets/payment-icons/culqi-logo.png').default,\r\n  'mercadopago':require('../assets/payment-icons/mercadopago-logo.png').default,\r\n  'squareup':require('../assets/payment-icons/squareup-logo.png').default,\r\n  'wipay':require('../assets/payment-icons/wipay-logo.png').default,\r\n  'test':require('../assets/payment-icons/test-logo.png').default,\r\n  'razorpay':require('../assets/payment-icons/razorpay-logo.png').default,\r\n}\r\n\r\nexport default function AddBookings(props) {\r\n  const { t, i18n  } = useTranslation();\r\n  const isRTL = i18n.dir();\r\n  const {\r\n    getEstimate,\r\n    clearEstimate,\r\n    addBooking,\r\n    clearBooking,\r\n    MinutesPassed,\r\n    GetDateString,\r\n    GetDistance,\r\n    updateBooking,\r\n    updateProfileWithEmail,\r\n    checkUserExists\r\n  } = api;\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n  const cartypes = useSelector(state => state.cartypes.cars);\r\n  const estimatedata = useSelector(state => state.estimatedata);\r\n  const bookingdata = useSelector(state => state.bookingdata);\r\n  const userdata = useSelector(state => state.usersdata);\r\n  const auth = useSelector(state => state.auth);\r\n  const settings = useSelector(state => state.settingsdata.settings);\r\n  const providers = useSelector(state => state.paymentmethods.providers);\r\n  const activeBookings = useSelector(state => state.bookinglistdata.active);\r\n  const [carType, setCarType] = useState(t('select_car'));\r\n  const [pickupAddress, setPickupAddress] = useState(null);\r\n  const [dropAddress, setDropAddress] = useState(null);\r\n  const [optionModalStatus, setOptionModalStatus] = useState(false);\r\n  const [estimateModalStatus, setEstimateModalStatus] = useState(false);\r\n  const [selectedCarDetails, setSelectedCarDetails] = useState(null);\r\n  const [users, setUsers] = useState(null);\r\n  const [commonAlert, setCommonAlert] = useState({ open: false, msg: '' });\r\n  const [userCombo, setUserCombo] = useState(null);\r\n  const [estimateRequested, setEstimateRequested] = useState(false);\r\n  const [bookingType, setBookingType] = useState('Book Now');\r\n  const rootRef = useRef(null);\r\n  const [tempRoute, setTempRoute] = useState();\r\n  const [drivers,setDrivers] = useState([]);\r\n  const [paymentModalStatus, setPaymentModalStatus] = useState(false);\r\n  const [walletModalStatus, setWalletModalStatus] = useState(false);\r\n  const {state} = useLocation();\r\n  const [selectedProvider, setSelectedProvider] = useState();\r\n  const [selectedProviderIndex, setSelectedProviderIndex] = useState(0);\r\n  const [roundTrip, setRoundTrip] = useState(0);\r\n  const [tripInstructions, setTripInstructions] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [bookingOnWait,setBookingOnWait] = useState();\r\n\r\n  const [instructionData,setInstructionData] = useState({\r\n    deliveryPerson : \"\",\r\n    deliveryPersonPhone: \"\",\r\n    pickUpInstructions: \"\",\r\n    deliveryInstructions: \"\",\r\n    parcelTypeIndex: 0,\r\n    optionIndex: 0,\r\n    parcelTypeSelected: null,\r\n    optionSelected: null\r\n  });\r\n\r\n  const [profileData,setProfileData] = useState({\r\n    firstName : '',\r\n    lastName : '',\r\n    email: ''\r\n  });\r\n\r\n  const [payment_mode, setPaymentMode] = useState(0);\r\n  const [radioProps,setRadioProps] =  useState([]);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(()=>{\r\n      if(settings && providers){\r\n        setSelectedProvider(providers[0]);\r\n        let arr = [{ label: t('wallet'), value: 0, cat: 'wallet' }];\r\n        let val = 0;\r\n        if(!settings.disable_online && providers && providers.length > 0){\r\n            val++;\r\n            arr.push({ label: t('card'), value: val , cat: 'card' });\r\n        }\r\n        if(!settings.disable_cash){\r\n            val++;\r\n            arr.push({ label: t('cash'), value: val, cat: 'cash' });\r\n        }\r\n        setRadioProps(arr);\r\n      }\r\n  },[settings, providers, t]);;\r\n\r\n  useEffect(() => {\r\n    if(state && state !== null){\r\n      let carDetails = state.carData;\r\n      setCarType(carDetails.name)\r\n      let instObj = {...instructionData};\r\n      if(Array.isArray(carDetails.parcelTypes)){\r\n        instObj.parcelTypeSelected = carDetails.parcelTypes[0];\r\n        instObj.parcelTypeIndex = 0;\r\n      }\r\n      if(Array.isArray(carDetails.options)){\r\n        instObj.optionSelected = carDetails.options[0];\r\n        instObj.optionIndex = 0;\r\n      }\r\n      setInstructionData(instObj);\r\n      setSelectedCarDetails(carDetails);\r\n    }\r\n  }, [instructionData, state]);\r\n\r\n  const handleChange = (e) => {\r\n    if(e.target.name === 'parcelTypeIndex'){\r\n      setInstructionData({ \r\n        ...instructionData,\r\n        parcelTypeIndex: parseInt(e.target.value),\r\n        parcelTypeSelected: selectedCarDetails.parcelTypes[e.target.value]\r\n      });\r\n    }else if(e.target.name === 'optionIndex'){\r\n      setInstructionData({ \r\n        ...instructionData,\r\n        optionIndex: parseInt(e.target.value),\r\n        optionSelected: selectedCarDetails.options[e.target.value]\r\n      });\r\n    }else if(e.target.name === 'payment_mode'){\r\n      setPaymentMode(e.target.value);\r\n    }else if(e.target.name === 'selectedProviderIndex'){\r\n      setSelectedProviderIndex(parseInt(e.target.value));\r\n      setSelectedProvider(providers[parseInt(e.target.value)]);\r\n    }else if(e.target.name === 'tripInstructions'){\r\n      setTripInstructions(e.target.value);\r\n    }else if(e.target.name === 'roundTrip'){\r\n      setRoundTrip(e.target.value);\r\n    }else if(e.target.name === 'firstName'){\r\n      setProfileData({ ...profileData, [e.target.name]: e.target.value });\r\n    }else if(e.target.name === 'lastName'){\r\n      setProfileData({ ...profileData, [e.target.name]: e.target.value });\r\n    }else if(e.target.name === 'email'){\r\n      setProfileData({ ...profileData, [e.target.name]: e.target.value });\r\n    }else{\r\n      setInstructionData({ ...instructionData, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  const [selectedDate, setSelectedDate] = useState(GetDateString());\r\n\r\n  const clearForm = () => {\r\n    setUserCombo(null);\r\n    setPickupAddress(null);\r\n    setDropAddress(null);\r\n    setSelectedCarDetails(null);\r\n    setCarType(t('select_car'));\r\n    setBookingType('Book Now');\r\n    setEstimateRequested(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (auth.profile && bookingOnWait) {\r\n      setEstimateModalStatus(false); \r\n      dispatch(addBooking(bookingOnWait));\r\n      setBookingOnWait(null);\r\n      setLoading(false);\r\n    }\r\n  }, [auth.profile,bookingOnWait,dispatch,addBooking])\r\n\r\n  useEffect(() => {\r\n    if (bookingdata.booking && bookingdata.booking.mainData.status === 'PAYMENT_PENDING') {\r\n      if(bookingdata.booking.mainData.payment_mode === 'cash'){\r\n        dispatch(clearBooking());\r\n        setTempRoute(null);\r\n        navigate('/bookings')\r\n      } else{\r\n        if(bookingdata.booking.mainData.payment_mode === 'card'){\r\n          setPaymentModalStatus(true);\r\n        }else{\r\n          setWalletModalStatus(true);\r\n        }\r\n      }\r\n    }\r\n    if (bookingdata.booking && bookingdata.booking.mainData.status === 'NEW') {\r\n      dispatch(clearBooking());\r\n      setTempRoute(null);\r\n      navigate('/bookings')\r\n    }\r\n  }, [bookingdata.booking,clearBooking,dispatch,navigate]);\r\n\r\n  const handleCarSelect = (event) => {\r\n    setCarType(event.target.value);\r\n    let carDetails = null;\r\n    for (let i = 0; i < cartypes.length; i++) {\r\n      if (cartypes[i].name === event.target.value) {\r\n        carDetails = cartypes[i];\r\n        let instObj = {...instructionData};\r\n        if(Array.isArray(cartypes[i].parcelTypes)){\r\n          instObj.parcelTypeSelected = cartypes[i].parcelTypes[0];\r\n          instObj.parcelTypeIndex = 0;\r\n        }\r\n        if(Array.isArray(cartypes[i].options)){\r\n          instObj.optionSelected = cartypes[i].options[0];\r\n          instObj.optionIndex = 0;\r\n        }\r\n        setInstructionData(instObj);\r\n      }\r\n    }\r\n    setSelectedCarDetails(carDetails);\r\n  };\r\n\r\n  const handleBookTypeSelect = (event) => {\r\n    setBookingType(event.target.value);\r\n    if (bookingType === 'Book Later') {\r\n      setSelectedDate(GetDateString());\r\n    }\r\n  };\r\n\r\n  const onDateChange = (event) => {\r\n    setSelectedDate(event.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (estimatedata.estimate && estimateRequested) {\r\n      setEstimateRequested(false);\r\n      setEstimateModalStatus(true);\r\n    }\r\n    if (userdata.users) {\r\n      let arr = [];\r\n      for (let i = 0; i < userdata.users.length; i++) {\r\n        let user = userdata.users[i];\r\n        if (user.usertype === 'customer' && ((auth.profile.usertype === 'fleetadmin' && user.fleetadmin === auth.profile.uid) || auth.profile.usertype === 'admin')) {\r\n          arr.push({\r\n            'firstName': user.firstName,\r\n            'lastName': user.lastName,\r\n            'mobile': user.mobile,\r\n            'email': user.email,\r\n            'uid': user.id,\r\n            'desc': user.firstName + ' ' + user.lastName + ' (' + (settings.AllowCriticalEditsAdmin? user.mobile : \"Hidden\") + ') ' + (settings.AllowCriticalEditsAdmin? user.email : \"Hidden\"),\r\n            'pushToken': user.pushToken ? user.pushToken : ''\r\n          });\r\n        }\r\n      }\r\n      setUsers(arr);\r\n      let arrDrivers = [];\r\n      for (let i = 0; i < userdata.users.length; i++) {\r\n        let user = userdata.users[i];\r\n        if ((user.usertype) && (user.usertype === 'driver') && (user.approved === true) && (user.queue === false) && (user.driverActiveStatus === true) && (user.location)) {\r\n          if((auth.profile.usertype === 'fleetadmin' && user.fleetadmin === auth.profile.uid) || auth.profile.usertype === 'admin' || auth.profile.usertype === 'customer'){\r\n            arrDrivers.push({\r\n              'uid': user.id,\r\n              'location': user.location,\r\n              'carType': user.carType,\r\n              'fleetadmin': user.fleetadmin ? user.fleetadmin : null\r\n            });\r\n          }\r\n        }\r\n      }\r\n      setDrivers(arrDrivers);\r\n    }\r\n  }, [estimatedata.estimate, userdata.users, estimateRequested, settings.AllowCriticalEditsAdmin, auth.profile.usertype, auth.profile.uid]);\r\n \r\n \r\n  useEffect(() => {\r\n    if(auth.profile.usertype && auth.profile.usertype==='customer'){\r\n      setUserCombo({\r\n        'firstName': auth.profile.firstName,\r\n        'lastName': auth.profile.lastName,\r\n        'mobile': auth.profile.mobile,\r\n        'email': auth.profile.email,\r\n        'uid': auth.profile.uid,\r\n        'pushToken': auth.profile.pushToken ? auth.profile.pushToken : ''\r\n      })\r\n    }\r\n  }, [auth.profile]);\r\n\r\n\r\n  const mobile = (userCombo && userCombo.mobile ? true : false);\r\n\r\n  const handleGetOptions = (e) => {\r\n    e.preventDefault();\r\n    if((settings && settings.imageIdApproval && auth.profile.usertype ==='customer' && auth.profile.verifyId) || auth.profile.usertype==='admin' || (settings && !settings.imageIdApproval && auth.profile.usertype ==='customer') || auth.profile.usertype === 'fleetadmin'){\r\n      if(!(settings && settings.disable_cash && (auth.profile.usertype==='admin'|| auth.profile.usertype === 'fleetadmin')) || auth.profile.usertype==='customer'){\r\n        if((auth.profile.usertype==='customer' && parseFloat(auth.profile.walletBalance)>=0) || auth.profile.usertype==='admin' || auth.profile.usertype === 'fleetadmin'){\r\n          setEstimateRequested(true);\r\n          if (userCombo && pickupAddress && dropAddress && selectedCarDetails) {\r\n            const directionService = new window.google.maps.DirectionsService();\r\n            directionService.route(\r\n              {\r\n                origin: new window.google.maps.LatLng(pickupAddress.coords.lat, pickupAddress.coords.lng),\r\n                destination: new window.google.maps.LatLng(dropAddress.coords.lat, dropAddress.coords.lng),\r\n                travelMode: window.google.maps.TravelMode.DRIVING\r\n              },\r\n              (result, status) => {\r\n                if (status === window.google.maps.DirectionsStatus.OK) {\r\n                  const route = {\r\n                    distance_in_km:(result.routes[0].legs[0].distance.value / 1000),\r\n                    time_in_secs:result.routes[0].legs[0].duration.value,\r\n                    polylinePoints:result.routes[0].overview_polyline\r\n                  };\r\n                  setTempRoute(route);\r\n                  if(pickupAddress && dropAddress){\r\n                    if (bookingType === 'Book Now') {\r\n                      if(mobile === true){\r\n                        if(Array.isArray(selectedCarDetails.options) || Array.isArray(selectedCarDetails.parcelTypes)){\r\n                          setOptionModalStatus(true);\r\n                        }else{\r\n                          let estimateRequest = {\r\n                            pickup: pickupAddress,\r\n                            drop: dropAddress,\r\n                            carDetails: selectedCarDetails,\r\n                            instructionData: instructionData,\r\n                            routeDetails: route\r\n                          };\r\n                          dispatch(getEstimate(estimateRequest));\r\n                        }\r\n                      }else{\r\n                        setCommonAlert({ open: true, msg: t('incomplete_user')});\r\n                      }\r\n                    } else {\r\n                        if (bookingType === 'Book Later' && selectedDate) {\r\n                          if (MinutesPassed(selectedDate) >= 15) {\r\n                            if(mobile === true){\r\n                              if(Array.isArray(selectedCarDetails.options) || Array.isArray(selectedCarDetails.parcelTypes)){\r\n                                setOptionModalStatus(true);\r\n                              }else{\r\n                                let estimateRequest = {\r\n                                  pickup: pickupAddress,\r\n                                  drop: dropAddress,\r\n                                  carDetails: selectedCarDetails,\r\n                                  instructionData: instructionData,\r\n                                  routeDetails: route\r\n                                };\r\n                                dispatch(getEstimate(estimateRequest));\r\n                              }\r\n                            }else{\r\n                              setCommonAlert({ open: true, msg: t('incomplete_user')});\r\n                            }\r\n                          } else {\r\n                            setCommonAlert({ open: true, msg: t('past_booking_error') });\r\n                          }\r\n                        } else {\r\n                          setCommonAlert({ open: true, msg: t('select_proper') });\r\n                        }\r\n                      }\r\n                  } else {\r\n                    setCommonAlert({ open: true, msg: t('place_to_coords_error') })\r\n                  }\r\n                }\r\n              }\r\n            )\r\n          } else {\r\n            setCommonAlert({ open: true, msg: t('select_proper') })\r\n          }\r\n        }else{\r\n          setCommonAlert({ open: true, msg: t('wallet_balance_low') })\r\n        }\r\n      } else {\r\n        setCommonAlert({ open: true, msg: t('cash_booking_false') })\r\n      }\r\n    } else {\r\n      setCommonAlert({ open: true, msg: t('verifyid_error') })\r\n    }    \r\n  }\r\n\r\n  const handleWalletPayment = (e) => {\r\n    e.preventDefault();\r\n    let curBooking = { ...bookingdata.booking.mainData };\r\n    if(parseFloat(curBooking.trip_cost)>parseFloat(auth.profile.walletBalance) && radioProps[payment_mode].cat === 'wallet'){\r\n      setCommonAlert({open:true, msg: t('wallet_balance_low')});\r\n    }else{\r\n      let requestedDrivers = {};\r\n      if (settings.autoDispatch && bookingType === 'Book Now') {\r\n        for (let i = 0; i < drivers.length; i++) {\r\n          const driver = drivers[i];\r\n          let distance = GetDistance(pickupAddress.coords.lat, pickupAddress.coords.lng, driver.location.lat, driver.location.lng);\r\n          if (settings.convert_to_mile) {\r\n            distance = distance / 1.609344;\r\n          }\r\n          if (distance < ((settings && settings.driverRadius) ? settings.driverRadius : 10) && selectedCarDetails.name === driver.carType) {\r\n            requestedDrivers[driver['uid']] = true;\r\n          }\r\n        }\r\n      }\r\n      curBooking.prepaid = true;\r\n      curBooking.status = 'NEW';\r\n      curBooking.payment_mode = \"wallet\";\r\n      curBooking.customer_paid = parseFloat(curBooking.trip_cost).toFixed(settings.decimal);\r\n      curBooking.discount = 0;\r\n      curBooking.usedWalletMoney = parseFloat(curBooking.trip_cost).toFixed(settings.decimal);\r\n      curBooking.cardPaymentAmount = 0;\r\n      curBooking.cashPaymentAmount = 0;\r\n      curBooking.payableAmount = 0;\r\n      curBooking.requestedDrivers = requestedDrivers;\r\n\r\n      dispatch(updateBooking(curBooking));\r\n\r\n      setTimeout(()=>{\r\n        dispatch(clearEstimate());\r\n        setPaymentModalStatus(false);\r\n        setWalletModalStatus(false);\r\n        clearForm();\r\n        dispatch(clearBooking());\r\n        setTempRoute(null);\r\n        navigate('/bookings')\r\n      },1500);\r\n    }\r\n  }\r\n\r\n  const handleGetEstimate = (e) => {\r\n    e.preventDefault();\r\n    setOptionModalStatus(false);\r\n    let estimateRequest = {\r\n      pickup: pickupAddress,\r\n      drop: dropAddress,\r\n      carDetails: selectedCarDetails,\r\n      instructionData: instructionData,\r\n      routeDetails: tempRoute\r\n    };\r\n    dispatch(getEstimate(estimateRequest));\r\n  };\r\n\r\n  const confirmBooking = (e) => {\r\n    e.preventDefault();\r\n    let requestedDrivers = {};\r\n    let driverEstimates = {};\r\n\r\n    let notfound = true;\r\n    if(activeBookings){\r\n        for(let i=0; i<activeBookings.length; i++){\r\n            if(activeBookings[i].payment_mode==='wallet' && activeBookings[i].status!=='PAID'){\r\n                notfound = false;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if((radioProps[payment_mode].cat === 'wallet' && notfound && auth.profile.usertype === 'customer') || radioProps[payment_mode].cat !== 'wallet' || auth.profile.usertype === 'admin' || auth.profile.usertype === 'fleetadmin'){\r\n      if ((radioProps[payment_mode].cat === 'wallet' && (parseFloat(auth.profile.walletBalance) >= parseFloat(estimatedata.estimate.estimateFare)) && !calcEst && auth.profile.usertype === 'customer') || radioProps[payment_mode].cat !== 'wallet' || (radioProps[payment_mode].cat === 'wallet' && calcEst && auth.profile.usertype === 'customer')|| auth.profile.usertype === 'admin' || auth.profile.usertype === 'fleetadmin') {\r\n        if (settings.autoDispatch && bookingType === 'Book Now') {\r\n          for (let i = 0; i < drivers.length; i++) {\r\n            const driver = drivers[i];\r\n            let distance = GetDistance(pickupAddress.coords.lat, pickupAddress.coords.lng, driver.location.lat, driver.location.lng);\r\n            if (settings.convert_to_mile) {\r\n              distance = distance / 1.609344;\r\n            }\r\n            if (distance < ((settings && settings.driverRadius) ? settings.driverRadius : 10) && ((settings.carType_required && selectedCarDetails.name === driver.carType) || !settings.carType_required) && ((auth.profile.usertype === 'fleetadmin' && driver.fleetadmin === auth.profile.uid) || auth.profile.usertype !== 'fleetadmin')) {\r\n              requestedDrivers[driver['uid']] = true;\r\n              driverEstimates[driver['uid']] = {distance: distance, timein_text: ((distance * 2) + 1).toFixed(0) + ' min'};\r\n            }\r\n          }\r\n          if(Object.keys(requestedDrivers).length=== 0){\r\n            setCommonAlert({open:true, msg: t('no_driver_found_alert_messege')});\r\n            return;\r\n          }\r\n        }\r\n\r\n        let bookingObject = {\r\n          pickup: pickupAddress,\r\n          drop: dropAddress,\r\n          carDetails: selectedCarDetails,\r\n          userDetails: {\r\n            uid: userCombo.uid,\r\n            firstName: userCombo.firstName,\r\n            lastName: userCombo.lastName,\r\n            mobile: userCombo.mobile,\r\n            pushToken: userCombo.pushToken,\r\n            email: userCombo.email\r\n          },\r\n          estimate: estimatedata.estimate,\r\n          instructionData: instructionData,\r\n          tripInstructions: tripInstructions,\r\n          roundTrip: roundTrip === 0? false: true,\r\n          tripdate: bookingType === 'Book Later' ? new Date(selectedDate).getTime() : new Date().getTime(),\r\n          bookLater: bookingType === 'Book Later' ? true : false,\r\n          settings: settings,\r\n          booking_type_admin: auth.profile.usertype === 'admin'? true: false,\r\n          fleetadmin: auth.profile.usertype === 'fleetadmin'? auth.profile.uid: null,\r\n          requestedDrivers: calcEst ? requestedDrivers : (optionsRequired && radioProps[payment_mode].cat === 'cash') ? requestedDrivers : (settings.prepaid && radioProps[payment_mode].cat === 'cash') ? requestedDrivers : !settings.prepaid ? requestedDrivers : null ,\r\n          driverEstimates: driverEstimates,\r\n          payment_mode: (auth.profile.usertype === 'admin' || auth.profile.usertype === 'fleetadmin' )?'cash':radioProps[payment_mode].cat,\r\n          booking_from_web: true\r\n        };\r\n\r\n        if(auth.profile.usertype === 'customer' && !(auth.profile.firstName && auth.profile.lastName && auth.profile.email && auth.profile.firstName.length>0 && auth.profile.lastName.length>0 && auth.profile.email.length>0)){\r\n          const regx1 = /([0-9\\s-]{7,})(?:\\s*(?:#|x\\.?|ext\\.?|extension)\\s*(\\d+))?$/;\r\n          if ((optionsRequired && /\\S/.test(instructionData.deliveryPerson) && regx1.test(instructionData.deliveryPersonPhone) && instructionData.deliveryPersonPhone && instructionData.deliveryPersonPhone.length > 6) || !optionsRequired){\r\n            if((profileData.firstName && profileData.firstName.length > 0 && profileData.lastName && profileData.lastName.length > 0) || (auth.profile.firstName && auth.profile.firstName.length > 0 && auth.profile.lastName && auth.profile.lastName.length > 0)){\r\n              const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n              if((re.test(profileData.email) && !auth.profile.email) || (auth.profile.email && auth.profile.email.length > 0)){\r\n                setLoading(true);\r\n                checkUserExists({email: profileData.email}).then(async(res) => {\r\n                  if (res.users && res.users.length > 0) {\r\n                    setLoading(false);\r\n                    alert(t('user_exists'));\r\n                  }\r\n                  else if(res.error){\r\n                    setLoading(false);\r\n                    alert(t('email_or_mobile_issue'));\r\n                  } else{\r\n                    setLoading(false);\r\n                    if(radioProps[payment_mode].cat === 'card'){\r\n                      const paymentPacket = { \r\n                        payment_mode: 'card',\r\n                        customer_paid: parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),\r\n                        cardPaymentAmount: parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),\r\n                        discount: 0,\r\n                        usedWalletMoney:0,\r\n                        cashPaymentAmount: 0,\r\n                        promo_applied: false,\r\n                        promo_details: null,\r\n                        payableAmount: parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),\r\n                      };\r\n                      bookingObject['paymentPacket'] = paymentPacket;\r\n                    }\r\n            \r\n                    const result = validateBookingObj(t, bookingObject, instructionData);\r\n                    if(result.error){\r\n                      setCommonAlert({ open: true, msg: result.msg });\r\n                    } else{\r\n                      profileData['uid'] = auth.profile.uid;\r\n                      let bookingData = result.bookingObject;\r\n                      bookingData.userDetails.firstName = profileData.firstName;\r\n                      bookingData.userDetails.lastName = profileData.lastName;\r\n                      bookingData.userDetails.email = profileData.email;\r\n                      setBookingOnWait(bookingData);\r\n                    }\r\n                    setTimeout(()=>{\r\n                      dispatch(updateProfileWithEmail(profileData));\r\n                    },200) \r\n                  }\r\n              });\r\n              } else {\r\n                setCommonAlert({ open: true, msg: t('proper_email') })\r\n              }\r\n            } else {\r\n              setCommonAlert({ open: true, msg: t('proper_input_name') })\r\n            }\r\n          } else {\r\n            setCommonAlert({ open: true, msg: t('deliveryDetailMissing') })\r\n          }\r\n        } else{\r\n          if(radioProps[payment_mode].cat === 'card'){\r\n            const paymentPacket = { \r\n              payment_mode: 'card',\r\n              customer_paid: parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),\r\n              cardPaymentAmount: parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),\r\n              discount: 0,\r\n              usedWalletMoney:0,\r\n              cashPaymentAmount: 0,\r\n              promo_applied: false,\r\n              promo_details: null,\r\n              payableAmount: parseFloat(estimatedata.estimate.estimateFare).toFixed(settings.decimal),\r\n            };\r\n            bookingObject['paymentPacket'] = paymentPacket;\r\n          }\r\n          const result = validateBookingObj(t, bookingObject, instructionData);\r\n          if(result.error){\r\n            setCommonAlert({ open: true, msg: result.msg });\r\n          } else{\r\n            setEstimateModalStatus(false); \r\n            dispatch(addBooking(result.bookingObject));\r\n          }\r\n        }\r\n      }else{\r\n        setCommonAlert({ open: true, msg: t('wallet_balance_low') });\r\n      } \r\n    } else {\r\n      setCommonAlert({ open: true, msg: t('wallet_booking_alert') });\r\n    }\r\n  };\r\n\r\n  const handleOptionModalClose = (e) => {\r\n    e.preventDefault();\r\n    setOptionModalStatus(false);\r\n  };\r\n\r\n  const handleEstimateModalClose = (e) => {\r\n    e.preventDefault();\r\n    setEstimateModalStatus(false);\r\n    dispatch(clearEstimate());\r\n    setEstimateRequested(false);\r\n  };\r\n\r\n  const handleEstimateErrorClose = (e) => {\r\n    e.preventDefault();\r\n    dispatch(clearEstimate());\r\n    setEstimateRequested(false);\r\n  };\r\n\r\n  const handleBookingErrorClose = (e) => {\r\n    e.preventDefault();\r\n    dispatch(clearBooking());\r\n    setEstimateRequested(false);\r\n  };\r\n\r\n  const handleCommonAlertClose = (e) => {\r\n    e.preventDefault();\r\n    setCommonAlert({ open: false, msg: '' })\r\n  };\r\n\r\n  const handleWalletModalClose = (e) => {\r\n    setTimeout(()=>{\r\n      setWalletModalStatus(false);\r\n      dispatch(clearBooking());\r\n      dispatch(clearEstimate());\r\n    },1500);\r\n  }\r\n\r\n  const handlePaymentModalClose = (e) => {\r\n    setTimeout(()=>{\r\n      setPaymentModalStatus(false);\r\n      dispatch(clearBooking());\r\n      dispatch(clearEstimate());\r\n    },1500);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.container} ref={rootRef}>\r\n      <Grid item xs={12} sm={12} md={8} lg={8}>\r\n        <Grid item xs={12}>\r\n            <Typography component=\"h1\" variant=\"h5\" className={classes.title} style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n              {t('addbookinglable')}\r\n            </Typography>\r\n          </Grid>\r\n        <div className={classes.container1}>\r\n          <Grid container spacing={2} >\r\n            <Grid item xs={12} >\r\n              {users && auth.profile.usertype && auth.profile.usertype!=='customer' ?\r\n                <UsersCombo\r\n                  className={classes.items}\r\n                  placeholder={t('select_user')}\r\n                  users={users}\r\n                  value={userCombo}\r\n                  onChange={(event, newValue) => {\r\n                    setUserCombo(newValue);\r\n                  }}\r\n                />\r\n                : null}\r\n            </Grid>\r\n            <Grid item xs={12} >\r\n              <GoogleMapsAutoComplete\r\n                variant={\"outlined\"}\r\n                placeholder={t('pickup_location')}\r\n                value={pickupAddress}\r\n                className={classes.items}\r\n                onChange={\r\n                  (value) => {\r\n                    setPickupAddress(value);\r\n                  }\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} >\r\n              <GoogleMapsAutoComplete placeholder={t('drop_location')}\r\n                variant={\"outlined\"}\r\n                value={dropAddress}\r\n                className={classes.items}\r\n                onChange={\r\n                  (value) => {\r\n                    setDropAddress(value);\r\n                  }\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6} >\r\n              {cartypes ?\r\n                  <Select\r\n                     labelId=\"demo-simple-select-label\"\r\n                     id=\"demo-simple-select\"\r\n                      value={carType}\r\n                      onChange={handleCarSelect}\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      style={{textAlign:isRTL==='rtl'? 'right':'left',}}\r\n                      className={carType === t('select_car') ? classes.inputdimmed : classes.input}\r\n                     \r\n                  >\r\n                    <MenuItem dense={true} value={t('select_car')} key={t('select_car')} style={{direction:isRTL==='rtl'?'rtl':'ltr', width:'100%', justifyContent:'flex-start', paddingLeft:10}}>\r\n                      {t('select_car')}\r\n                    </MenuItem>\r\n                    {\r\n                      cartypes.sort((a, b) => a.pos - b.pos).map((car) =>\r\n                        <MenuItem dense={true}  key={car.name} value={car.name} style={{direction:isRTL==='rtl'?'rtl':'ltr', width:'100%', justifyContent:'flex-start', paddingLeft:10}}>\r\n                          <img src={car.image} className={isRTL==='rtl'? classes.carphotoRtl : classes.carphoto} alt=\"car types\"/>{car.name}\r\n                        </MenuItem>\r\n                      )\r\n                    }\r\n                  </Select>\r\n                : null}\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n                <Select\r\n                  id=\"booking-type-native\"\r\n                  value={bookingType}\r\n                  onChange={handleBookTypeSelect}\r\n                  className={classes.input}\r\n                  style={{textAlign:isRTL==='rtl'? 'right':'left'}}\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  inputProps={{ 'aria-label': 'Without label' }}\r\n                >\r\n                  <MenuItem dense key={\"Book Now\"} value={\"Book Now\"} style={{direction:isRTL==='rtl'?'rtl':'ltr', width:'100%', justifyContent:'flex-start', paddingLeft:10}}>\r\n                    {t('book_now')}\r\n                  </MenuItem>\r\n                  <MenuItem dense key={\"Book Later\"} value={\"Book Later\"} style={{direction:isRTL==='rtl'?'rtl':'ltr', width:'100%', justifyContent:'flex-start', paddingLeft:10}}>\r\n                    {t('book_later')}\r\n                  </MenuItem>\r\n                </Select>\r\n              </Grid>\r\n              {bookingType === 'Book Later' ?\r\n                <Grid item xs={12} sm={6} >\r\n                  <TextField\r\n                    id=\"datetime-local\"\r\n                    label={t('booking_date_time')}\r\n                    type=\"datetime-local\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    className={isRTL==='rtl'?classes.inputRtl:classes.commonInputStyle}\r\n                    InputProps={{\r\n                      className: classes.input,\r\n                      style:{textAlignLast:isRTL==='rtl'?'end':'start'}\r\n                    }}\r\n                    value={selectedDate}\r\n                    onChange={onDateChange}\r\n                  />\r\n                </Grid>\r\n              : null}\r\n              {bookingType === 'Book Later' ?\r\n                <Grid item xs={12} sm={6} >\r\n                  <Button\r\n                    size=\"lg\"\r\n                    onClick={handleGetOptions}\r\n                    variant=\"contained\" \r\n                    color=\"secondaryButton\"\r\n                    className={classes.buttonStyle}\r\n                  >\r\n                    <i className=\"fas fa-car\" style={isRTL ==='rtl' ? {marginLeft:5}:{marginRight:5}}/>\r\n                    {t('book')}\r\n                  </Button>\r\n                </Grid>\r\n              :\r\n                <Grid item xs={12} >\r\n                  <Button\r\n                    size=\"lg\"\r\n                    onClick={handleGetOptions}\r\n                    variant=\"contained\" \r\n                    color=\"secondaryButton\"\r\n                    className={classes.buttonStyle}\r\n                  >\r\n                    <i className=\"fas fa-car\" style={isRTL ==='rtl' ? {marginLeft:5}:{marginRight:5}}/>\r\n                    {t('book')}\r\n                  </Button>\r\n                </Grid>\r\n              }\r\n          </Grid>\r\n        </div>\r\n      </Grid>\r\n      <Modal\r\n        disablePortal\r\n        disableEnforceFocus\r\n        disableAutoFocus\r\n        open={optionModalStatus}\r\n        onClose={handleOptionModalClose}\r\n        className={classes.modal}\r\n        container={() => rootRef.current}\r\n      >\r\n        <Grid container spacing={2} className={classes.paper}>\r\n          <Grid item xs={12} sm={12} md={12} lg={12} style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n          {selectedCarDetails && selectedCarDetails.parcelTypes?\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\">{t('parcel_types')}</FormLabel>\r\n              <RadioGroup name=\"parcelTypeIndex\" value={instructionData.parcelTypeIndex} onChange={handleChange}>\r\n                {selectedCarDetails.parcelTypes.map((element,index) =>\r\n                  <FormControlLabel key={element.description} value={index} control={<Radio />} label={ settings.swipe_symbol===false? settings.symbol + ' ' + element.amount + ' - ' + element.description: element.amount + ' ' + settings.symbol + ' - ' + element.description} />\r\n                )}\r\n              </RadioGroup>\r\n            </FormControl>\r\n          :null}\r\n          </Grid>\r\n          <Grid item xs={12} sm={12} md={12} lg={12} style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n          {selectedCarDetails && selectedCarDetails.options?\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\">{t('options')}</FormLabel>\r\n              <RadioGroup name=\"optionIndex\" value={instructionData.optionIndex} onChange={handleChange}>\r\n                {selectedCarDetails.options.map((element,index) =>\r\n                  <FormControlLabel key={element.description} value={index} control={<Radio />} label={ settings.swipe_symbol===false? settings.symbol + ' ' + element.amount + ' - ' + element.description: element.amount + ' ' + settings.symbol + ' - ' + element.description} />\r\n                )}\r\n              </RadioGroup>\r\n            </FormControl>\r\n          :null}\r\n          </Grid>\r\n          <Grid item xs={12} sm={12} md={12} lg={12}  style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n          <Button onClick={handleOptionModalClose} variant=\"contained\" color=\"primary\">\r\n            {t('cancel')}\r\n          </Button>\r\n          <Button onClick={handleGetEstimate} variant=\"contained\" color=\"primary\" style={isRTL==='rtl'?{marginRight:10}:{marginLeft:10}}>\r\n            {t('get_estimate')}\r\n          </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Modal>\r\n      <Modal\r\n        disablePortal\r\n        disableEnforceFocus\r\n        disableAutoFocus\r\n        open={estimateModalStatus}\r\n        onClose={handleEstimateModalClose}\r\n        className={classes.modal}\r\n        container={() => rootRef.current}\r\n      >\r\n        <Grid container spacing={1} className={classes.paper}>\r\n          <BookingModalBody \r\n              classes={classes}  \r\n              instructionData={instructionData} \r\n              handleChange={handleChange}\r\n              tripInstructions={tripInstructions}\r\n              roundTrip={roundTrip}\r\n              auth={auth}\r\n              profileData={profileData}\r\n          />\r\n          {showEst?\r\n          <Grid item xs={12} sm={12} md={12} lg={12} style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n            {settings.swipe_symbol===false?\r\n              <Typography color={'primary'} style={{fontSize:30}}>\r\n                {t('total')} - {settings?settings.symbol:null} {estimatedata.estimate ? estimatedata.estimate.estimateFare : null}\r\n              </Typography>\r\n              :\r\n              <Typography color={'primary'} style={{fontSize:30}}>\r\n                {t('total')} - {estimatedata.estimate ? estimatedata.estimate.estimateFare : null} {settings?settings.symbol:null}\r\n              </Typography>\r\n            }\r\n          </Grid>\r\n          :null}\r\n          {auth.profile.usertype === 'customer'?\r\n          <Grid item xs={12} sm={12} md={12} lg={12} style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n            <FormControl component=\"fieldset\">\r\n              <FormLabel component=\"legend\">{t('payment_mode')}</FormLabel>\r\n              <RadioGroup name=\"payment_mode\" value={payment_mode} onChange={handleChange}>\r\n                {radioProps.map((element,index) =>\r\n                  <FormControlLabel key={element.cat} value={index} control={<Radio />} label={element.label} />\r\n                )}\r\n              </RadioGroup>\r\n            </FormControl>\r\n          </Grid>\r\n          :null}\r\n          <Grid item xs={12} sm={12} md={12} lg={12} style={{textAlign:isRTL==='rtl'?'right':'left'}}>\r\n          {loading?\r\n            <DialogActions style={{justifyContent:'center', alignContent:'center'}}>\r\n              <CircularProgress/>\r\n            </DialogActions>\r\n          :\r\n            <Grid item xs={12} >\r\n              <Button onClick={handleEstimateModalClose} variant=\"contained\" color=\"primary\">\r\n                {t('cancel')}\r\n              </Button>\r\n              <Button onClick={confirmBooking} variant=\"contained\" color=\"primary\" style={isRTL==='rtl'?{marginRight:10}:{marginLeft:10}}>\r\n                {t('book_now')}\r\n              </Button>\r\n            </Grid>\r\n          }\r\n          </Grid>\r\n        </Grid>\r\n      </Modal>\r\n\r\n      <Modal\r\n        disablePortal\r\n        disableEnforceFocus\r\n        disableAutoFocus\r\n        open={walletModalStatus}\r\n        onClose={handleWalletModalClose}\r\n        className={classes.modal}\r\n        container={() => rootRef.current}\r\n      >\r\n        <Grid container spacing={2} className={classes.paper}>\r\n          <Grid item xs={12} sm={12} md={12} lg={12} style={{marginBottom: '20px'}}>\r\n            <Typography  style={{fontWeight:'bolder', marginBottom:10}}>\r\n              {t('payment')}\r\n            </Typography>\r\n            {bookingdata && bookingdata.booking?\r\n            <Typography color={\"primary\"} style={{fontSize:30}}>\r\n              { (settings.swipe_symbol===false? settings.symbol + bookingdata.booking.mainData.trip_cost :  bookingdata.booking.mainData.trip_cost + settings.symbol) }\r\n            </Typography>\r\n            :null}\r\n            <Typography >\r\n              {t('use_wallet_balance') + \" \" + (settings.swipe_symbol===false? settings.symbol + auth.profile.walletBalance :  auth.profile.walletBalance + settings.symbol) + \")\"}\r\n            </Typography>\r\n          </Grid>            \r\n          <Grid item xs={12} sm={12} md={12} lg={12}>\r\n            <Button onClick={handleWalletModalClose} variant=\"contained\" color=\"primary\">\r\n              {t('cancel')}\r\n            </Button>\r\n            <Button variant=\"contained\" color=\"primary\" style={{marginLeft:10}} onClick={handleWalletPayment}>\r\n              {t('paynow_button')}\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Modal>\r\n      <Modal\r\n        disablePortal\r\n        disableEnforceFocus\r\n        disableAutoFocus\r\n        open={paymentModalStatus}\r\n        onClose={handlePaymentModalClose}\r\n        className={classes.modal}\r\n        container={() => rootRef.current}\r\n      >\r\n        <Grid container spacing={2} className={classes.paper}>\r\n          {providers && selectedProvider && bookingdata && bookingdata.booking?\r\n          <form action={selectedProvider.link} method=\"POST\">\r\n            <input type='hidden' name='order_id' value={bookingdata.booking.booking_id}/>\r\n            <input type='hidden' name='amount' value={bookingdata.booking.mainData.trip_cost}/>\r\n            <input type='hidden' name='currency' value={settings.code}/>\r\n            <input type='hidden' name='product_name' value={t('bookingPayment')}/>\r\n            <input type='hidden' name='first_name' value={auth.profile.firstName}/>\r\n            <input type='hidden' name='last_name' value={auth.profile.lastName}/>\r\n            <input type='hidden' name='quantity' value={1}/>\r\n            <input type='hidden' name='cust_id' value={bookingdata.booking.mainData.customer}/>\r\n            <input type='hidden' name='mobile_no' value={bookingdata.booking.mainData.customer_contact}/>\r\n            <input type='hidden' name='email' value={bookingdata.booking.mainData.customer_email}/>\r\n            <Grid item xs={12} sm={12} md={12} lg={12} style={{marginBottom: '20px'}}>\r\n              <FormControl fullWidth>\r\n              <FormLabel component=\"legend\">{t('payment')}</FormLabel>\r\n              <Select\r\n                  id=\"selectedProviderIndex\"\r\n                  name= \"selectedProviderIndex\"\r\n                  value={selectedProviderIndex}\r\n                  label={t('payment')}\r\n                  onChange={handleChange}\r\n                  style={{textAlign:isRTL==='rtl'? 'right':'left'}}\r\n                  inputProps={{ 'aria-label': 'Without label' }}\r\n                >\r\n                  {providers.map((provider,index) =>\r\n                    <MenuItem key={provider.name} value={index}><img style={{height:24,margin:7}} src={icons[provider.name]} alt={provider.name}/> </MenuItem>\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12} md={12} lg={12}>\r\n            <Button onClick={handlePaymentModalClose} variant=\"contained\" color=\"primary\">\r\n              {t('cancel')}\r\n            </Button>\r\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\" style={{marginLeft:10}} onClick={handlePaymentModalClose}>\r\n              {t('paynow_button')}\r\n            </Button>\r\n            </Grid>\r\n          </form>\r\n          :null}\r\n        </Grid>\r\n      </Modal>\r\n      <AlertDialog open={bookingdata.error.flag} onClose={handleBookingErrorClose}>{bookingdata.error.msg}</AlertDialog>\r\n      <AlertDialog open={estimatedata.error.flag} onClose={handleEstimateErrorClose}>{estimatedata.error.msg}</AlertDialog>\r\n      <AlertDialog open={commonAlert.open} onClose={handleCommonAlertClose}>{commonAlert.msg}</AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}