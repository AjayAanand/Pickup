{"ast":null,"code":"import _slicedToArray from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import MaterialTable from'material-table';import{useSelector,useDispatch}from\"react-redux\";import CircularLoading from\"../components/CircularLoading\";import{api}from'common';import{useTranslation}from\"react-i18next\";import{colors}from'../components/Theme/WebTheme';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Notifications(){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var isRTL=i18n.dir();var sendNotification=api.sendNotification,editNotifications=api.editNotifications;var settings=useSelector(function(state){return state.settingsdata.settings;});var columns=[{title:t('device_type'),field:'devicetype',lookup:{All:t('all'),ANDROID:t('android'),IOS:t('ios')},cellStyle:{paddingLeft:isRTL==='rtl'?55:null}},{title:t('user_type'),field:'usertype',lookup:{customer:t('customer'),driver:t('driver')},cellStyle:{paddingLeft:isRTL==='rtl'?55:null}},{title:t('title'),field:'title',cellStyle:{paddingLeft:isRTL==='rtl'?40:null}},{title:t('body'),field:'body',cellStyle:{paddingLeft:isRTL==='rtl'?40:null}}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var notificationdata=useSelector(function(state){return state.notificationdata;});var dispatch=useDispatch();useEffect(function(){if(notificationdata.notifications){setData(notificationdata.notifications);}else{setData([]);}},[notificationdata.notifications]);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedRow=_useState4[0],setSelectedRow=_useState4[1];return notificationdata.loading?/*#__PURE__*/_jsx(CircularLoading,{}):/*#__PURE__*/_jsx(MaterialTable,{title:t('push_notification_title'),columns:columns,style:{direction:isRTL==='rtl'?'rtl':'ltr',borderRadius:\"8px\",boxShadow:\"4px 4px 6px #9E9E9E\"},data:data,onRowClick:function onRowClick(evt,selectedRow){return setSelectedRow(selectedRow.tableData.id);},options:{rowStyle:function rowStyle(rowData){return{backgroundColor:selectedRow===rowData.tableData.id?'#EEE':'#FFF'};},editable:{backgroundColor:colors.Header_Text,fontSize:\"0.8em\",fontWeight:'bold ',fontFamily:'Lucida Console\", \"Courier New\", monospace'},headerStyle:{position:\"sticky\",top:\"0px\",backgroundColor:colors.Header_Text_back,color:'#fff',fontSize:\"0.8em\",fontWeight:'bold ',fontFamily:'Lucida Console\", \"Courier New\", monospace'}},localization:{body:{addTooltip:t('add'),deleteTooltip:t('delete'),editTooltip:t('edit'),emptyDataSourceMessage:t('blank_message'),editRow:{deleteText:t('delete_message'),cancelTooltip:t('cancel'),saveTooltip:t('save')}},toolbar:{searchPlaceholder:t('search'),exportTitle:t('export')},header:{actions:t('actions')},pagination:{labelDisplayedRows:'{from}-{to} '+t('of')+' {count}',firstTooltip:t('first_page_tooltip'),previousTooltip:t('previous_page_tooltip'),nextTooltip:t('next_page_tooltip'),lastTooltip:t('last_page_tooltip')}},editable:{onRowAdd:function onRowAdd(newData){return new Promise(function(resolve,reject){setTimeout(function(){if(settings.AllowCriticalEditsAdmin){if(newData.body&&newData.devicetype&&newData.title&&newData.usertype){var tblData=data;tblData.push(newData);dispatch(sendNotification(newData));dispatch(editNotifications(newData,\"Add\"));resolve();}else{alert(t('no_details_error'));reject();}}else{alert(t('demo_mode'));reject();}},600);});},onRowDelete:function onRowDelete(oldData){return new Promise(function(resolve){setTimeout(function(){resolve();dispatch(editNotifications(oldData,\"Delete\"));},600);});}}});}","map":{"version":3,"names":["React","useState","useEffect","MaterialTable","useSelector","useDispatch","CircularLoading","api","useTranslation","colors","jsx","_jsx","Notifications","_useTranslation","t","i18n","isRTL","dir","sendNotification","editNotifications","settings","state","settingsdata","columns","title","field","lookup","All","ANDROID","IOS","cellStyle","paddingLeft","customer","driver","_useState","_useState2","_slicedToArray","data","setData","notificationdata","dispatch","notifications","_useState3","_useState4","selectedRow","setSelectedRow","loading","style","direction","borderRadius","boxShadow","onRowClick","evt","tableData","id","options","rowStyle","rowData","backgroundColor","editable","Header_Text","fontSize","fontWeight","fontFamily","headerStyle","position","top","Header_Text_back","color","localization","body","addTooltip","deleteTooltip","editTooltip","emptyDataSourceMessage","editRow","deleteText","cancelTooltip","saveTooltip","toolbar","searchPlaceholder","exportTitle","header","actions","pagination","labelDisplayedRows","firstTooltip","previousTooltip","nextTooltip","lastTooltip","onRowAdd","newData","Promise","resolve","reject","setTimeout","AllowCriticalEditsAdmin","devicetype","usertype","tblData","push","alert","onRowDelete","oldData"],"sources":["/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/web-app/src/views/Notifications.js"],"sourcesContent":["import React,{ useState, useEffect } from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport CircularLoading from \"../components/CircularLoading\";\r\nimport { api } from 'common';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {colors} from '../components/Theme/WebTheme';\r\n\r\nexport default function Notifications() {\r\n  const { t, i18n  } = useTranslation();\r\n  const isRTL = i18n.dir();\r\n  const {\r\n    sendNotification,\r\n    editNotifications\r\n  } = api;\r\n  const settings = useSelector(state => state.settingsdata.settings);\r\n\r\n  const columns =  [\r\n      {\r\n        title: t('device_type'),\r\n        field: 'devicetype',\r\n        lookup: { All: (t('all')), ANDROID: (t('android')), IOS: (t('ios')) },\r\n        cellStyle:{paddingLeft: isRTL=== 'rtl'?55:null}\r\n      },\r\n      {\r\n        title: t('user_type'),\r\n        field: 'usertype',\r\n        lookup: { customer: t('customer'), driver: t('driver') },\r\n        cellStyle:{paddingLeft: isRTL=== 'rtl'?55:null}\r\n      },\r\n      { title: t('title'),field: 'title', cellStyle:{paddingLeft: isRTL=== 'rtl'?40:null}},\r\n      { title: t('body'), field: 'body', cellStyle:{paddingLeft: isRTL=== 'rtl'?40:null}},\r\n  ];\r\n\r\n  const [data, setData] = useState([]);\r\n  const notificationdata = useSelector(state => state.notificationdata);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(()=>{\r\n        if(notificationdata.notifications){\r\n            setData(notificationdata.notifications);\r\n        }else{\r\n            setData([]);\r\n        }\r\n  },[notificationdata.notifications]);\r\n\r\n  const [selectedRow, setSelectedRow] = useState(null);\r\n\r\n  return (\r\n    notificationdata.loading? <CircularLoading/>:\r\n    <MaterialTable\r\n      title={t('push_notification_title')}\r\n      columns={columns}\r\n      style={{direction:isRTL ==='rtl'?'rtl':'ltr', borderRadius: \"8px\", boxShadow: \"4px 4px 6px #9E9E9E\"}}\r\n      data={data}\r\n      onRowClick={((evt, selectedRow) => setSelectedRow(selectedRow.tableData.id))}\r\n      options={{\r\n        rowStyle: rowData => ({\r\n          backgroundColor: (selectedRow === rowData.tableData.id) ? '#EEE' : '#FFF'\r\n        }),\r\n        editable:{\r\n          backgroundColor: colors.Header_Text,\r\n          fontSize: \"0.8em\",\r\n          fontWeight: 'bold ',\r\n          fontFamily: 'Lucida Console\", \"Courier New\", monospace'\r\n        },\r\n        headerStyle: {\r\n          position: \"sticky\",\r\n          top: \"0px\",\r\n          backgroundColor: colors.Header_Text_back ,\r\n          color: '#fff',\r\n          fontSize: \"0.8em\",\r\n          fontWeight: 'bold ',\r\n          fontFamily: 'Lucida Console\", \"Courier New\", monospace'\r\n        },\r\n      }}\r\n      localization={{body:{\r\n        addTooltip: (t('add')),\r\n        deleteTooltip: (t('delete')),\r\n        editTooltip: (t('edit')),\r\n        emptyDataSourceMessage: (\r\n          (t('blank_message'))\r\n      ),\r\n      editRow: { \r\n        deleteText: (t('delete_message')),\r\n        cancelTooltip: (t('cancel')),\r\n        saveTooltip: (t('save')) \r\n        }, \r\n        },\r\n        toolbar: {\r\n          searchPlaceholder: (t('search')),\r\n          exportTitle: (t('export')),\r\n        },\r\n        header: {\r\n          actions: (t('actions')) \r\n      },\r\n      pagination: {\r\n        labelDisplayedRows: ('{from}-{to} '+ (t('of'))+ ' {count}'),\r\n        firstTooltip: (t('first_page_tooltip')),\r\n        previousTooltip: (t('previous_page_tooltip')),\r\n        nextTooltip: (t('next_page_tooltip')),\r\n        lastTooltip: (t('last_page_tooltip'))\r\n      },\r\n      }}\r\n      editable={{\r\n        onRowAdd: newData =>\r\n          new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n              if(settings.AllowCriticalEditsAdmin){\r\n                if(newData.body && newData.devicetype && newData.title && newData.usertype){\r\n                  const tblData = data;\r\n                  tblData.push(newData);\r\n                  dispatch(sendNotification(newData));\r\n                  dispatch(editNotifications(newData,\"Add\"));\r\n                  resolve();\r\n                } else {\r\n                  alert(t('no_details_error'));\r\n                  reject();\r\n                }\r\n              } else{\r\n                alert(t('demo_mode'));\r\n                reject();\r\n              }\r\n            }, 600);\r\n          }),\r\n        onRowDelete: oldData =>\r\n          new Promise(resolve => {\r\n            setTimeout(() => {\r\n              resolve();\r\n              dispatch(editNotifications(oldData,\"Delete\"));\r\n            }, 600);\r\n          }),\r\n      }}\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}