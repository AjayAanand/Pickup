{"ast":null,"code":"import _slicedToArray from\"/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Navigate}from'react-router-dom';import{useSelector}from\"react-redux\";import ResponsiveDrawer from'../components/ResponsiveDrawer';import CircularLoading from\"../components/CircularLoading\";import{jsx as _jsx}from\"react/jsx-runtime\";function matchUser(permit,usertype){var permitions=permit?permit.split(','):[];var permitted=false;for(var i=0;i<permitions.length;i++){permitted=usertype===permitions[i]?true:false;if(permitted)break;}return permitted;}function ProtectedRoute(_ref){var permit=_ref.permit,children=_ref.children;var auth=useSelector(function(state){return state.auth;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checkedAuth=_useState2[0],setCheckedAuth=_useState2[1];useEffect(function(){if(auth.profile&&auth.profile.uid){setCheckedAuth(true);}if(auth.error&&auth.error.msg&&!auth.profile){setCheckedAuth(true);}},[auth.profile,auth.error]);return checkedAuth?auth.profile&&auth.profile.uid?matchUser(permit,auth.profile.usertype)?/*#__PURE__*/_jsx(ResponsiveDrawer,{children:children}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):/*#__PURE__*/_jsx(CircularLoading,{});}export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","useSelector","ResponsiveDrawer","CircularLoading","jsx","_jsx","matchUser","permit","usertype","permitions","split","permitted","i","length","ProtectedRoute","_ref","children","auth","state","_useState","_useState2","_slicedToArray","checkedAuth","setCheckedAuth","profile","uid","error","msg","to"],"sources":["/Users/sumitbajaj/Downloads/TAXI-PICK/Sourcecode/web-app/src/views/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {Navigate} from 'react-router-dom';\r\nimport { useSelector } from \"react-redux\";\r\nimport ResponsiveDrawer from '../components/ResponsiveDrawer';\r\nimport CircularLoading from \"../components/CircularLoading\";\r\n\r\nfunction matchUser(permit, usertype){\r\n    let permitions = permit? permit.split(',') : [];\r\n    let permitted = false;\r\n    for(let i=0;i<permitions.length;i++){\r\n        permitted = usertype === permitions[i]?true:false\r\n        if(permitted) break;\r\n    }\r\n    return permitted;\r\n}\r\n\r\nfunction ProtectedRoute({ permit,children }) {\r\n    const auth = useSelector(state => state.auth);\r\n    const [checkedAuth,setCheckedAuth] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        if(auth.profile && auth.profile.uid){\r\n            setCheckedAuth(true);\r\n        }\r\n        if(auth.error && auth.error.msg && !auth.profile){\r\n            setCheckedAuth(true);\r\n        }\r\n    },[auth.profile,auth.error])\r\n\r\n    return(\r\n        checkedAuth?\r\n            auth.profile && auth.profile.uid?\r\n                matchUser(permit,auth.profile.usertype) ? <ResponsiveDrawer>{children}</ResponsiveDrawer>:<Navigate to=\"/login\" />\r\n            :<Navigate to=\"/login\" /> \r\n        :<CircularLoading/>\r\n    )\r\n}\r\n\r\nexport default ProtectedRoute;"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAAQC,QAAQ,KAAO,kBAAkB,CACzC,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,gBAAgB,KAAM,gCAAgC,CAC7D,MAAO,CAAAC,eAAe,KAAM,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5D,QAAS,CAAAC,SAASA,CAACC,MAAM,CAAEC,QAAQ,CAAC,CAChC,GAAI,CAAAC,UAAU,CAAGF,MAAM,CAAEA,MAAM,CAACG,KAAK,CAAC,GAAG,CAAC,CAAG,EAAE,CAC/C,GAAI,CAAAC,SAAS,CAAG,KAAK,CACrB,IAAI,GAAI,CAAAC,CAAC,CAAC,CAAC,CAACA,CAAC,CAACH,UAAU,CAACI,MAAM,CAACD,CAAC,EAAE,CAAC,CAChCD,SAAS,CAAGH,QAAQ,GAAKC,UAAU,CAACG,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CACjD,GAAGD,SAAS,CAAE,MAClB,CACA,MAAO,CAAAA,SAAS,CACpB,CAEA,QAAS,CAAAG,cAAcA,CAAAC,IAAA,CAAsB,IAAnB,CAAAR,MAAM,CAAAQ,IAAA,CAANR,MAAM,CAACS,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrC,GAAM,CAAAC,IAAI,CAAGhB,WAAW,CAAC,SAAAiB,KAAK,QAAI,CAAAA,KAAK,CAACD,IAAI,GAAC,CAC7C,IAAAE,SAAA,CAAqCpB,QAAQ,CAAC,KAAK,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAACG,cAAc,CAAAH,UAAA,IAEjCtB,SAAS,CAAC,UAAI,CACV,GAAGmB,IAAI,CAACO,OAAO,EAAIP,IAAI,CAACO,OAAO,CAACC,GAAG,CAAC,CAChCF,cAAc,CAAC,IAAI,CAAC,CACxB,CACA,GAAGN,IAAI,CAACS,KAAK,EAAIT,IAAI,CAACS,KAAK,CAACC,GAAG,EAAI,CAACV,IAAI,CAACO,OAAO,CAAC,CAC7CD,cAAc,CAAC,IAAI,CAAC,CACxB,CACJ,CAAC,CAAC,CAACN,IAAI,CAACO,OAAO,CAACP,IAAI,CAACS,KAAK,CAAC,CAAC,CAE5B,MACI,CAAAJ,WAAW,CACPL,IAAI,CAACO,OAAO,EAAIP,IAAI,CAACO,OAAO,CAACC,GAAG,CAC5BnB,SAAS,CAACC,MAAM,CAACU,IAAI,CAACO,OAAO,CAAChB,QAAQ,CAAC,cAAGH,IAAA,CAACH,gBAAgB,EAAAc,QAAA,CAAEA,QAAQ,EAAoB,cAACX,IAAA,CAACL,QAAQ,EAAC4B,EAAE,CAAC,QAAQ,EAAG,cACrHvB,IAAA,CAACL,QAAQ,EAAC4B,EAAE,CAAC,QAAQ,EAAG,cAC5BvB,IAAA,CAACF,eAAe,IAAE,CAE3B,CAEA,cAAe,CAAAW,cAAc"},"metadata":{},"sourceType":"module"}